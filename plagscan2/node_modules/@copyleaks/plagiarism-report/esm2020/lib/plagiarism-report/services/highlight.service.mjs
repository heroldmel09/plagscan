import { Injectable } from '@angular/core';
import { BehaviorSubject, Subject } from 'rxjs';
import { filter, map, withLatestFrom } from 'rxjs/operators';
import { untilDestroy } from '../../shared/operators/untilDestroy';
import * as helpers from '../utils/highlight-helpers';
import * as i0 from "@angular/core";
import * as i1 from "./report.service";
export class HighlightService {
    constructor(reportService) {
        this.reportService = reportService;
        this._originalText = new BehaviorSubject(null);
        this._sourceText = new BehaviorSubject(null);
        this._suspectText = new BehaviorSubject(null);
        this._originalHtml = new BehaviorSubject(null);
        this._sourceHtml = new BehaviorSubject(null);
        this._suspectHtml = new BehaviorSubject(null);
        this._textMatchClick = new Subject();
        this._htmlMatchClick = new Subject();
        this._jump = new Subject();
        this._clear = new Subject();
        this.textMatchClick$.pipe(untilDestroy(this)).subscribe(event => {
            switch (event.origin) {
                case 'original':
                    this.setOriginalTextMatch(event.elem);
                    break;
                case 'source':
                    this.setSourceTextMatch(event.elem);
                    break;
                case 'suspect':
                    this.setSuspectTextMatch(event.elem);
                    break;
            }
        });
    }
    get jump$() {
        return this._jump.asObservable();
    }
    get clear$() {
        return this._clear.asObservable();
    }
    get oneToManyTextMatchClick$() {
        return this.textMatchClick$.pipe(filter(ev => ev.origin === 'original'));
    }
    get oneToOneTextMatchClick$() {
        return this.textMatchClick$.pipe(filter(ev => ev.origin === 'source' || ev.origin === 'suspect'));
    }
    get oneToManyHtmlMatchClick$() {
        return this._htmlMatchClick.asObservable().pipe(withLatestFrom(this.reportService.viewMode$), filter(([, mode]) => mode === 'one-to-many'), map(([event]) => event));
    }
    get oneToOneHtmlMatchClick$() {
        return this._htmlMatchClick.asObservable().pipe(withLatestFrom(this.reportService.viewMode$), filter(([, mode]) => mode === 'one-to-one'), map(([event]) => event));
    }
    get originalText$() {
        return this._originalText.asObservable();
    }
    get sourceText$() {
        return this._sourceText.asObservable();
    }
    get suspectText$() {
        return this._suspectText.asObservable();
    }
    get originalHtml$() {
        return this._originalHtml.asObservable();
    }
    get sourceHtml$() {
        return this._sourceHtml.asObservable();
    }
    get suspectHtml$() {
        return this._suspectHtml.asObservable();
    }
    get textMatchClick$() {
        return this._textMatchClick.asObservable();
    }
    /**
     * Clear the currently selected matches
     * @param mode the mode to clear, leave empty for both
     */
    clear(mode) {
        if (!mode || mode === 'html') {
            this.textMatchClicked({ elem: null, broadcast: false, origin: 'original' });
            this.textMatchClicked({ elem: null, broadcast: false, origin: 'source' });
            this.textMatchClicked({ elem: null, broadcast: false, origin: 'suspect' });
        }
        if (!mode || mode === 'text') {
            this.htmlMatchClicked(null, true);
            this.htmlMatchClicked(null, false);
        }
    }
    /**
     * Pushes a new `TextMatchClickEvent` to the text match click observer
     * @param event The match component that was clicked
     */
    textMatchClicked(event) {
        this._textMatchClick.next(event);
    }
    /**
     * Pushes a new `HtmlMatchClickEvent` to the html match click observer
     * @param match the match data of the clicked element
     * @param isSource `true` if the match comes from the `source` and `false` if it comes from the `suspect`
     */
    htmlMatchClicked(match, isSource) {
        this._htmlMatchClick.next({ match, isSource, broadcast: true });
    }
    /**
     * Pushes the match that should be marked to the original text match observer
     * This will mark/unmark the text match in the original component while in `one-to-many` view mode
     * @param match The match to mark/unmark
     */
    setOriginalTextMatch(next) {
        const prev = this._originalText.value;
        if (prev === next) {
            next = null;
        }
        setTimeout(() => {
            helpers.onTextMatchChange([prev, next]);
        });
        this._originalText.next(next);
    }
    /**
     * Pushes the match that should be marked to the source text match observer
     * This will mark/unmark the text match in the original component while in `one-to-one` view mode
     * @param match The match to mark/unmark
     */
    setSourceTextMatch(next) {
        const prev = this._sourceText.value;
        if (prev === next) {
            next = null;
        }
        setTimeout(() => {
            helpers.onTextMatchChange([prev, next]);
        });
        this._sourceText.next(next);
    }
    /**
     * Pushes the match that should be marked to the suspect text match observer
     * This will mark/unmark the text match in the suspect component while in `one-to-one` view mode
     * @param next The match to mark/unmark
     */
    setSuspectTextMatch(next) {
        const prev = this._suspectText.value;
        if (prev === next) {
            next = null;
        }
        setTimeout(() => {
            helpers.onTextMatchChange([prev, next]);
        });
        this._suspectText.next(next);
    }
    /**
     * Pushes the match that should be marked to the original html match observer
     * This will mark/unmark the html match in the original component while in `one-to-many` view mode
     * @param match The match to mark/unmark
     */
    setOriginalHtmlMatch(match) {
        this._originalHtml.next(match);
    }
    /**
     * Pushes the match that should be marked to the source html match observer
     * This will mark/unmark the html match in the original component while in `one-to-one` view mode
     * @param match The match to mark/unmark
     */
    setSourceHtmlMatch(match) {
        this._sourceHtml.next(match);
    }
    /**
     * Pushes the match that should be marked to the suspect html match observer
     * This will mark/unmark the html match in the suspect component while in `one-to-one` view mode
     * @param match The match to mark/unmark
     */
    setSuspectHtmlMatch(match) {
        this._suspectHtml.next(match);
    }
    /**
     * clear all selected matches
     */
    clearAllMatchs() {
        this.setOriginalTextMatch(null);
        this.setSuspectTextMatch(null);
        this.setOriginalHtmlMatch(null);
        this.setSourceHtmlMatch(null);
        this.setSuspectHtmlMatch(null);
        this.setSourceTextMatch(null);
    }
    /**
     * Push a new jump event to the jump observer
     *
     * @param next `true` to jump to the next match and `false` to jump to the previous match
     */
    jump(next) {
        this._jump.next(next);
    }
    /** dtor */
    ngOnDestroy() {
        this._originalText.complete();
        this._sourceText.complete();
        this._suspectText.complete();
        this._originalHtml.complete();
        this._sourceHtml.complete();
        this._suspectHtml.complete();
        this._jump.complete();
        this._textMatchClick.complete();
        this._htmlMatchClick.complete();
        this._jump.complete();
        this._clear.complete();
    }
}
HighlightService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.3.3", ngImport: i0, type: HighlightService, deps: [{ token: i1.ReportService }], target: i0.ɵɵFactoryTarget.Injectable });
HighlightService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "13.3.3", ngImport: i0, type: HighlightService });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.3.3", ngImport: i0, type: HighlightService, decorators: [{
            type: Injectable
        }], ctorParameters: function () { return [{ type: i1.ReportService }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGlnaGxpZ2h0LnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9wbGFnaWFyaXNtLXJlcG9ydC9zcmMvbGliL3BsYWdpYXJpc20tcmVwb3J0L3NlcnZpY2VzL2hpZ2hsaWdodC5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQWEsTUFBTSxlQUFlLENBQUM7QUFDdEQsT0FBTyxFQUFFLGVBQWUsRUFBRSxPQUFPLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDaEQsT0FBTyxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsY0FBYyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDN0QsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLHFDQUFxQyxDQUFDO0FBR25FLE9BQU8sS0FBSyxPQUFPLE1BQU0sNEJBQTRCLENBQUM7OztBQWlCdEQsTUFBTSxPQUFPLGdCQUFnQjtJQVk1QixZQUFvQixhQUE0QjtRQUE1QixrQkFBYSxHQUFiLGFBQWEsQ0FBZTtRQVgvQixrQkFBYSxHQUFHLElBQUksZUFBZSxDQUFpQixJQUFJLENBQUMsQ0FBQztRQUMxRCxnQkFBVyxHQUFHLElBQUksZUFBZSxDQUFpQixJQUFJLENBQUMsQ0FBQztRQUN4RCxpQkFBWSxHQUFHLElBQUksZUFBZSxDQUFpQixJQUFJLENBQUMsQ0FBQztRQUN6RCxrQkFBYSxHQUFHLElBQUksZUFBZSxDQUFRLElBQUksQ0FBQyxDQUFDO1FBQ2pELGdCQUFXLEdBQUcsSUFBSSxlQUFlLENBQVEsSUFBSSxDQUFDLENBQUM7UUFDL0MsaUJBQVksR0FBRyxJQUFJLGVBQWUsQ0FBUSxJQUFJLENBQUMsQ0FBQztRQUNoRCxvQkFBZSxHQUFHLElBQUksT0FBTyxFQUEyQixDQUFDO1FBQ3pELG9CQUFlLEdBQUcsSUFBSSxPQUFPLEVBQXVCLENBQUM7UUFDckQsVUFBSyxHQUFHLElBQUksT0FBTyxFQUFXLENBQUM7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QUFRLEVBQUUsQ0FBQztRQUM3QixJQUFJLENBQUMsYUFBYSxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQzlCLElBQUksQ0FBQyxXQUFXLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDNUIsSUFBSSxDQUFDLFlBQVksQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUM3QixJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQ3RCLElBQUksQ0FBQyxlQUFlLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDaEMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUNoQyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQ3RCLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFLENBQUM7SUFDeEIsQ0FBQzs7NkdBN05XLGdCQUFnQjtpSEFBaEIsZ0JBQWdCOzJGQUFoQixnQkFBZ0I7a0JBRDVCLFVBQVUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlLCBPbkRlc3Ryb3kgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEJlaGF2aW9yU3ViamVjdCwgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgZmlsdGVyLCBtYXAsIHdpdGhMYXRlc3RGcm9tIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHsgdW50aWxEZXN0cm95IH0gZnJvbSAnLi4vLi4vc2hhcmVkL29wZXJhdG9ycy91bnRpbERlc3Ryb3knO1xuaW1wb3J0IHsgTWF0Y2hDb21wb25lbnQgfSBmcm9tICcuLi9jb21wb25lbnRzL21hdGNoL21hdGNoLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBDb250ZW50TW9kZSwgTWF0Y2gsIFZpZXdNb2RlIH0gZnJvbSAnLi4vbW9kZWxzJztcbmltcG9ydCAqIGFzIGhlbHBlcnMgZnJvbSAnLi4vdXRpbHMvaGlnaGxpZ2h0LWhlbHBlcnMnO1xuaW1wb3J0IHsgUmVwb3J0U2VydmljZSB9IGZyb20gJy4vcmVwb3J0LnNlcnZpY2UnO1xuXG5leHBvcnQgdHlwZSBSZXBvcnRPcmlnaW4gPSAnb3JpZ2luYWwnIHwgJ3NvdXJjZScgfCAnc3VzcGVjdCc7XG5leHBvcnQgaW50ZXJmYWNlIFRleHRNYXRjaEhpZ2hsaWdodEV2ZW50IHtcblx0ZWxlbTogTWF0Y2hDb21wb25lbnQ7XG5cdG9yaWdpbjogUmVwb3J0T3JpZ2luO1xuXHRicm9hZGNhc3Q6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSHRtbE1hdGNoQ2xpY2tFdmVudCB7XG5cdG1hdGNoOiBNYXRjaDtcblx0aXNTb3VyY2U6IGJvb2xlYW47XG5cdGJyb2FkY2FzdDogYm9vbGVhbjtcbn1cblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIEhpZ2hsaWdodFNlcnZpY2UgaW1wbGVtZW50cyBPbkRlc3Ryb3kge1xuXHRwcml2YXRlIHJlYWRvbmx5IF9vcmlnaW5hbFRleHQgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PE1hdGNoQ29tcG9uZW50PihudWxsKTtcblx0cHJpdmF0ZSByZWFkb25seSBfc291cmNlVGV4dCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8TWF0Y2hDb21wb25lbnQ+KG51bGwpO1xuXHRwcml2YXRlIHJlYWRvbmx5IF9zdXNwZWN0VGV4dCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8TWF0Y2hDb21wb25lbnQ+KG51bGwpO1xuXHRwcml2YXRlIHJlYWRvbmx5IF9vcmlnaW5hbEh0bWwgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PE1hdGNoPihudWxsKTtcblx0cHJpdmF0ZSByZWFkb25seSBfc291cmNlSHRtbCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8TWF0Y2g+KG51bGwpO1xuXHRwcml2YXRlIHJlYWRvbmx5IF9zdXNwZWN0SHRtbCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8TWF0Y2g+KG51bGwpO1xuXHRwcml2YXRlIHJlYWRvbmx5IF90ZXh0TWF0Y2hDbGljayA9IG5ldyBTdWJqZWN0PFRleHRNYXRjaEhpZ2hsaWdodEV2ZW50PigpO1xuXHRwcml2YXRlIHJlYWRvbmx5IF9odG1sTWF0Y2hDbGljayA9IG5ldyBTdWJqZWN0PEh0bWxNYXRjaENsaWNrRXZlbnQ+KCk7XG5cdHByaXZhdGUgcmVhZG9ubHkgX2p1bXAgPSBuZXcgU3ViamVjdDxib29sZWFuPigpO1xuXHRwcml2YXRlIHJlYWRvbmx5IF9jbGVhciA9IG5ldyBTdWJqZWN0PFZpZXdNb2RlPigpO1xuXG5cdGNvbnN0cnVjdG9yKHByaXZhdGUgcmVwb3J0U2VydmljZTogUmVwb3J0U2VydmljZSkge1xuXHRcdHRoaXMudGV4dE1hdGNoQ2xpY2skLnBpcGUodW50aWxEZXN0cm95KHRoaXMpKS5zdWJzY3JpYmUoZXZlbnQgPT4ge1xuXHRcdFx0c3dpdGNoIChldmVudC5vcmlnaW4pIHtcblx0XHRcdFx0Y2FzZSAnb3JpZ2luYWwnOlxuXHRcdFx0XHRcdHRoaXMuc2V0T3JpZ2luYWxUZXh0TWF0Y2goZXZlbnQuZWxlbSk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgJ3NvdXJjZSc6XG5cdFx0XHRcdFx0dGhpcy5zZXRTb3VyY2VUZXh0TWF0Y2goZXZlbnQuZWxlbSk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgJ3N1c3BlY3QnOlxuXHRcdFx0XHRcdHRoaXMuc2V0U3VzcGVjdFRleHRNYXRjaChldmVudC5lbGVtKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyBnZXQganVtcCQoKSB7XG5cdFx0cmV0dXJuIHRoaXMuX2p1bXAuYXNPYnNlcnZhYmxlKCk7XG5cdH1cblxuXHRwdWJsaWMgZ2V0IGNsZWFyJCgpIHtcblx0XHRyZXR1cm4gdGhpcy5fY2xlYXIuYXNPYnNlcnZhYmxlKCk7XG5cdH1cblxuXHRwdWJsaWMgZ2V0IG9uZVRvTWFueVRleHRNYXRjaENsaWNrJCgpIHtcblx0XHRyZXR1cm4gdGhpcy50ZXh0TWF0Y2hDbGljayQucGlwZShmaWx0ZXIoZXYgPT4gZXYub3JpZ2luID09PSAnb3JpZ2luYWwnKSk7XG5cdH1cblxuXHRwdWJsaWMgZ2V0IG9uZVRvT25lVGV4dE1hdGNoQ2xpY2skKCkge1xuXHRcdHJldHVybiB0aGlzLnRleHRNYXRjaENsaWNrJC5waXBlKGZpbHRlcihldiA9PiBldi5vcmlnaW4gPT09ICdzb3VyY2UnIHx8IGV2Lm9yaWdpbiA9PT0gJ3N1c3BlY3QnKSk7XG5cdH1cblxuXHRwdWJsaWMgZ2V0IG9uZVRvTWFueUh0bWxNYXRjaENsaWNrJCgpIHtcblx0XHRyZXR1cm4gdGhpcy5faHRtbE1hdGNoQ2xpY2suYXNPYnNlcnZhYmxlKCkucGlwZShcblx0XHRcdHdpdGhMYXRlc3RGcm9tKHRoaXMucmVwb3J0U2VydmljZS52aWV3TW9kZSQpLFxuXHRcdFx0ZmlsdGVyKChbLCBtb2RlXSkgPT4gbW9kZSA9PT0gJ29uZS10by1tYW55JyksXG5cdFx0XHRtYXAoKFtldmVudF0pID0+IGV2ZW50KVxuXHRcdCk7XG5cdH1cblxuXHRwdWJsaWMgZ2V0IG9uZVRvT25lSHRtbE1hdGNoQ2xpY2skKCkge1xuXHRcdHJldHVybiB0aGlzLl9odG1sTWF0Y2hDbGljay5hc09ic2VydmFibGUoKS5waXBlKFxuXHRcdFx0d2l0aExhdGVzdEZyb20odGhpcy5yZXBvcnRTZXJ2aWNlLnZpZXdNb2RlJCksXG5cdFx0XHRmaWx0ZXIoKFssIG1vZGVdKSA9PiBtb2RlID09PSAnb25lLXRvLW9uZScpLFxuXHRcdFx0bWFwKChbZXZlbnRdKSA9PiBldmVudClcblx0XHQpO1xuXHR9XG5cblx0cHVibGljIGdldCBvcmlnaW5hbFRleHQkKCkge1xuXHRcdHJldHVybiB0aGlzLl9vcmlnaW5hbFRleHQuYXNPYnNlcnZhYmxlKCk7XG5cdH1cblx0cHVibGljIGdldCBzb3VyY2VUZXh0JCgpIHtcblx0XHRyZXR1cm4gdGhpcy5fc291cmNlVGV4dC5hc09ic2VydmFibGUoKTtcblx0fVxuXHRwdWJsaWMgZ2V0IHN1c3BlY3RUZXh0JCgpIHtcblx0XHRyZXR1cm4gdGhpcy5fc3VzcGVjdFRleHQuYXNPYnNlcnZhYmxlKCk7XG5cdH1cblxuXHRwdWJsaWMgZ2V0IG9yaWdpbmFsSHRtbCQoKSB7XG5cdFx0cmV0dXJuIHRoaXMuX29yaWdpbmFsSHRtbC5hc09ic2VydmFibGUoKTtcblx0fVxuXHRwdWJsaWMgZ2V0IHNvdXJjZUh0bWwkKCkge1xuXHRcdHJldHVybiB0aGlzLl9zb3VyY2VIdG1sLmFzT2JzZXJ2YWJsZSgpO1xuXHR9XG5cdHB1YmxpYyBnZXQgc3VzcGVjdEh0bWwkKCkge1xuXHRcdHJldHVybiB0aGlzLl9zdXNwZWN0SHRtbC5hc09ic2VydmFibGUoKTtcblx0fVxuXHRwdWJsaWMgZ2V0IHRleHRNYXRjaENsaWNrJCgpIHtcblx0XHRyZXR1cm4gdGhpcy5fdGV4dE1hdGNoQ2xpY2suYXNPYnNlcnZhYmxlKCk7XG5cdH1cblxuXHQvKipcblx0ICogQ2xlYXIgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCBtYXRjaGVzXG5cdCAqIEBwYXJhbSBtb2RlIHRoZSBtb2RlIHRvIGNsZWFyLCBsZWF2ZSBlbXB0eSBmb3IgYm90aFxuXHQgKi9cblx0cHVibGljIGNsZWFyKG1vZGU/OiBDb250ZW50TW9kZSkge1xuXHRcdGlmICghbW9kZSB8fCBtb2RlID09PSAnaHRtbCcpIHtcblx0XHRcdHRoaXMudGV4dE1hdGNoQ2xpY2tlZCh7IGVsZW06IG51bGwsIGJyb2FkY2FzdDogZmFsc2UsIG9yaWdpbjogJ29yaWdpbmFsJyB9KTtcblx0XHRcdHRoaXMudGV4dE1hdGNoQ2xpY2tlZCh7IGVsZW06IG51bGwsIGJyb2FkY2FzdDogZmFsc2UsIG9yaWdpbjogJ3NvdXJjZScgfSk7XG5cdFx0XHR0aGlzLnRleHRNYXRjaENsaWNrZWQoeyBlbGVtOiBudWxsLCBicm9hZGNhc3Q6IGZhbHNlLCBvcmlnaW46ICdzdXNwZWN0JyB9KTtcblx0XHR9XG5cdFx0aWYgKCFtb2RlIHx8IG1vZGUgPT09ICd0ZXh0Jykge1xuXHRcdFx0dGhpcy5odG1sTWF0Y2hDbGlja2VkKG51bGwsIHRydWUpO1xuXHRcdFx0dGhpcy5odG1sTWF0Y2hDbGlja2VkKG51bGwsIGZhbHNlKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogUHVzaGVzIGEgbmV3IGBUZXh0TWF0Y2hDbGlja0V2ZW50YCB0byB0aGUgdGV4dCBtYXRjaCBjbGljayBvYnNlcnZlclxuXHQgKiBAcGFyYW0gZXZlbnQgVGhlIG1hdGNoIGNvbXBvbmVudCB0aGF0IHdhcyBjbGlja2VkXG5cdCAqL1xuXHRwdWJsaWMgdGV4dE1hdGNoQ2xpY2tlZChldmVudDogVGV4dE1hdGNoSGlnaGxpZ2h0RXZlbnQpIHtcblx0XHR0aGlzLl90ZXh0TWF0Y2hDbGljay5uZXh0KGV2ZW50KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBQdXNoZXMgYSBuZXcgYEh0bWxNYXRjaENsaWNrRXZlbnRgIHRvIHRoZSBodG1sIG1hdGNoIGNsaWNrIG9ic2VydmVyXG5cdCAqIEBwYXJhbSBtYXRjaCB0aGUgbWF0Y2ggZGF0YSBvZiB0aGUgY2xpY2tlZCBlbGVtZW50XG5cdCAqIEBwYXJhbSBpc1NvdXJjZSBgdHJ1ZWAgaWYgdGhlIG1hdGNoIGNvbWVzIGZyb20gdGhlIGBzb3VyY2VgIGFuZCBgZmFsc2VgIGlmIGl0IGNvbWVzIGZyb20gdGhlIGBzdXNwZWN0YFxuXHQgKi9cblx0cHVibGljIGh0bWxNYXRjaENsaWNrZWQobWF0Y2g6IE1hdGNoLCBpc1NvdXJjZTogYm9vbGVhbikge1xuXHRcdHRoaXMuX2h0bWxNYXRjaENsaWNrLm5leHQoeyBtYXRjaCwgaXNTb3VyY2UsIGJyb2FkY2FzdDogdHJ1ZSB9KTtcblx0fVxuXHQvKipcblx0ICogUHVzaGVzIHRoZSBtYXRjaCB0aGF0IHNob3VsZCBiZSBtYXJrZWQgdG8gdGhlIG9yaWdpbmFsIHRleHQgbWF0Y2ggb2JzZXJ2ZXJcblx0ICogVGhpcyB3aWxsIG1hcmsvdW5tYXJrIHRoZSB0ZXh0IG1hdGNoIGluIHRoZSBvcmlnaW5hbCBjb21wb25lbnQgd2hpbGUgaW4gYG9uZS10by1tYW55YCB2aWV3IG1vZGVcblx0ICogQHBhcmFtIG1hdGNoIFRoZSBtYXRjaCB0byBtYXJrL3VubWFya1xuXHQgKi9cblx0cHVibGljIHNldE9yaWdpbmFsVGV4dE1hdGNoKG5leHQ6IE1hdGNoQ29tcG9uZW50KSB7XG5cdFx0Y29uc3QgcHJldiA9IHRoaXMuX29yaWdpbmFsVGV4dC52YWx1ZTtcblx0XHRpZiAocHJldiA9PT0gbmV4dCkge1xuXHRcdFx0bmV4dCA9IG51bGw7XG5cdFx0fVxuXHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0aGVscGVycy5vblRleHRNYXRjaENoYW5nZShbcHJldiwgbmV4dF0pO1xuXHRcdH0pO1xuXHRcdHRoaXMuX29yaWdpbmFsVGV4dC5uZXh0KG5leHQpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFB1c2hlcyB0aGUgbWF0Y2ggdGhhdCBzaG91bGQgYmUgbWFya2VkIHRvIHRoZSBzb3VyY2UgdGV4dCBtYXRjaCBvYnNlcnZlclxuXHQgKiBUaGlzIHdpbGwgbWFyay91bm1hcmsgdGhlIHRleHQgbWF0Y2ggaW4gdGhlIG9yaWdpbmFsIGNvbXBvbmVudCB3aGlsZSBpbiBgb25lLXRvLW9uZWAgdmlldyBtb2RlXG5cdCAqIEBwYXJhbSBtYXRjaCBUaGUgbWF0Y2ggdG8gbWFyay91bm1hcmtcblx0ICovXG5cdHB1YmxpYyBzZXRTb3VyY2VUZXh0TWF0Y2gobmV4dDogTWF0Y2hDb21wb25lbnQpIHtcblx0XHRjb25zdCBwcmV2ID0gdGhpcy5fc291cmNlVGV4dC52YWx1ZTtcblx0XHRpZiAocHJldiA9PT0gbmV4dCkge1xuXHRcdFx0bmV4dCA9IG51bGw7XG5cdFx0fVxuXHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0aGVscGVycy5vblRleHRNYXRjaENoYW5nZShbcHJldiwgbmV4dF0pO1xuXHRcdH0pO1xuXHRcdHRoaXMuX3NvdXJjZVRleHQubmV4dChuZXh0KTtcblx0fVxuXHQvKipcblx0ICogUHVzaGVzIHRoZSBtYXRjaCB0aGF0IHNob3VsZCBiZSBtYXJrZWQgdG8gdGhlIHN1c3BlY3QgdGV4dCBtYXRjaCBvYnNlcnZlclxuXHQgKiBUaGlzIHdpbGwgbWFyay91bm1hcmsgdGhlIHRleHQgbWF0Y2ggaW4gdGhlIHN1c3BlY3QgY29tcG9uZW50IHdoaWxlIGluIGBvbmUtdG8tb25lYCB2aWV3IG1vZGVcblx0ICogQHBhcmFtIG5leHQgVGhlIG1hdGNoIHRvIG1hcmsvdW5tYXJrXG5cdCAqL1xuXHRwdWJsaWMgc2V0U3VzcGVjdFRleHRNYXRjaChuZXh0OiBNYXRjaENvbXBvbmVudCkge1xuXHRcdGNvbnN0IHByZXYgPSB0aGlzLl9zdXNwZWN0VGV4dC52YWx1ZTtcblx0XHRpZiAocHJldiA9PT0gbmV4dCkge1xuXHRcdFx0bmV4dCA9IG51bGw7XG5cdFx0fVxuXHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0aGVscGVycy5vblRleHRNYXRjaENoYW5nZShbcHJldiwgbmV4dF0pO1xuXHRcdH0pO1xuXHRcdHRoaXMuX3N1c3BlY3RUZXh0Lm5leHQobmV4dCk7XG5cdH1cblxuXHQvKipcblx0ICogUHVzaGVzIHRoZSBtYXRjaCB0aGF0IHNob3VsZCBiZSBtYXJrZWQgdG8gdGhlIG9yaWdpbmFsIGh0bWwgbWF0Y2ggb2JzZXJ2ZXJcblx0ICogVGhpcyB3aWxsIG1hcmsvdW5tYXJrIHRoZSBodG1sIG1hdGNoIGluIHRoZSBvcmlnaW5hbCBjb21wb25lbnQgd2hpbGUgaW4gYG9uZS10by1tYW55YCB2aWV3IG1vZGVcblx0ICogQHBhcmFtIG1hdGNoIFRoZSBtYXRjaCB0byBtYXJrL3VubWFya1xuXHQgKi9cblx0cHVibGljIHNldE9yaWdpbmFsSHRtbE1hdGNoKG1hdGNoOiBNYXRjaCkge1xuXHRcdHRoaXMuX29yaWdpbmFsSHRtbC5uZXh0KG1hdGNoKTtcblx0fVxuXHQvKipcblx0ICogUHVzaGVzIHRoZSBtYXRjaCB0aGF0IHNob3VsZCBiZSBtYXJrZWQgdG8gdGhlIHNvdXJjZSBodG1sIG1hdGNoIG9ic2VydmVyXG5cdCAqIFRoaXMgd2lsbCBtYXJrL3VubWFyayB0aGUgaHRtbCBtYXRjaCBpbiB0aGUgb3JpZ2luYWwgY29tcG9uZW50IHdoaWxlIGluIGBvbmUtdG8tb25lYCB2aWV3IG1vZGVcblx0ICogQHBhcmFtIG1hdGNoIFRoZSBtYXRjaCB0byBtYXJrL3VubWFya1xuXHQgKi9cblx0cHVibGljIHNldFNvdXJjZUh0bWxNYXRjaChtYXRjaDogTWF0Y2gpIHtcblx0XHR0aGlzLl9zb3VyY2VIdG1sLm5leHQobWF0Y2gpO1xuXHR9XG5cdC8qKlxuXHQgKiBQdXNoZXMgdGhlIG1hdGNoIHRoYXQgc2hvdWxkIGJlIG1hcmtlZCB0byB0aGUgc3VzcGVjdCBodG1sIG1hdGNoIG9ic2VydmVyXG5cdCAqIFRoaXMgd2lsbCBtYXJrL3VubWFyayB0aGUgaHRtbCBtYXRjaCBpbiB0aGUgc3VzcGVjdCBjb21wb25lbnQgd2hpbGUgaW4gYG9uZS10by1vbmVgIHZpZXcgbW9kZVxuXHQgKiBAcGFyYW0gbWF0Y2ggVGhlIG1hdGNoIHRvIG1hcmsvdW5tYXJrXG5cdCAqL1xuXHRwdWJsaWMgc2V0U3VzcGVjdEh0bWxNYXRjaChtYXRjaDogTWF0Y2gpIHtcblx0XHR0aGlzLl9zdXNwZWN0SHRtbC5uZXh0KG1hdGNoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBjbGVhciBhbGwgc2VsZWN0ZWQgbWF0Y2hlc1xuXHQgKi9cblx0cHVibGljIGNsZWFyQWxsTWF0Y2hzKCkge1xuXHRcdHRoaXMuc2V0T3JpZ2luYWxUZXh0TWF0Y2gobnVsbCk7XG5cdFx0dGhpcy5zZXRTdXNwZWN0VGV4dE1hdGNoKG51bGwpO1xuXHRcdHRoaXMuc2V0T3JpZ2luYWxIdG1sTWF0Y2gobnVsbCk7XG5cdFx0dGhpcy5zZXRTb3VyY2VIdG1sTWF0Y2gobnVsbCk7XG5cdFx0dGhpcy5zZXRTdXNwZWN0SHRtbE1hdGNoKG51bGwpO1xuXHRcdHRoaXMuc2V0U291cmNlVGV4dE1hdGNoKG51bGwpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFB1c2ggYSBuZXcganVtcCBldmVudCB0byB0aGUganVtcCBvYnNlcnZlclxuXHQgKlxuXHQgKiBAcGFyYW0gbmV4dCBgdHJ1ZWAgdG8ganVtcCB0byB0aGUgbmV4dCBtYXRjaCBhbmQgYGZhbHNlYCB0byBqdW1wIHRvIHRoZSBwcmV2aW91cyBtYXRjaFxuXHQgKi9cblx0cHVibGljIGp1bXAobmV4dDogYm9vbGVhbikge1xuXHRcdHRoaXMuX2p1bXAubmV4dChuZXh0KTtcblx0fVxuXG5cdC8qKiBkdG9yICovXG5cdG5nT25EZXN0cm95KCkge1xuXHRcdHRoaXMuX29yaWdpbmFsVGV4dC5jb21wbGV0ZSgpO1xuXHRcdHRoaXMuX3NvdXJjZVRleHQuY29tcGxldGUoKTtcblx0XHR0aGlzLl9zdXNwZWN0VGV4dC5jb21wbGV0ZSgpO1xuXHRcdHRoaXMuX29yaWdpbmFsSHRtbC5jb21wbGV0ZSgpO1xuXHRcdHRoaXMuX3NvdXJjZUh0bWwuY29tcGxldGUoKTtcblx0XHR0aGlzLl9zdXNwZWN0SHRtbC5jb21wbGV0ZSgpO1xuXHRcdHRoaXMuX2p1bXAuY29tcGxldGUoKTtcblx0XHR0aGlzLl90ZXh0TWF0Y2hDbGljay5jb21wbGV0ZSgpO1xuXHRcdHRoaXMuX2h0bWxNYXRjaENsaWNrLmNvbXBsZXRlKCk7XG5cdFx0dGhpcy5fanVtcC5jb21wbGV0ZSgpO1xuXHRcdHRoaXMuX2NsZWFyLmNvbXBsZXRlKCk7XG5cdH1cbn1cbiJdfQ==
import { Component, HostBinding, ViewChild, ViewContainerRef, } from '@angular/core';
import { combineLatest } from 'rxjs';
import { delay, filter } from 'rxjs/operators';
import { untilDestroy } from '../../../shared/operators/untilDestroy';
import { IMAGES } from '../../assets/images';
import { ResultsFilterDialogComponent } from '../results-filter-dialog/results-filter-dialog.component';
import * as i0 from "@angular/core";
import * as i1 from "../../services/copyleaks.service";
import * as i2 from "../../services/report.service";
import * as i3 from "@angular/material/dialog";
import * as i4 from "../../services/layout-media-query.service";
import * as i5 from "../../services/highlight.service";
import * as i6 from "../../services/copyleaks-translate.service";
import * as i7 from "../../services/direction.service";
import * as i8 from "@angular/cdk/a11y";
import * as i9 from "../../../panel/panel.component";
import * as i10 from "../spinner/spinner.component";
import * as i11 from "@angular/material/button";
import * as i12 from "@angular/material/icon";
import * as i13 from "../plagiarism-free/plagiarism-free.component";
import * as i14 from "ngx-virtual-scroller";
import * as i15 from "../result-card/result-card.component";
import * as i16 from "../powered-by/powered-by.component";
import * as i17 from "@angular/common";
import * as i18 from "@angular/flex-layout/extended";
import * as i19 from "@angular/material/tooltip";
import * as i20 from "@angular/flex-layout/flex";
import * as i21 from "../../../shared/pipes/whitelist.pipe";
export class ResultsComponent {
    constructor(componentFactoryResolver, copyleaksService, reportService, dialogService, layoutService, highlightService, translationsService, directionService, cd, elementRef, announcer) {
        this.componentFactoryResolver = componentFactoryResolver;
        this.copyleaksService = copyleaksService;
        this.reportService = reportService;
        this.dialogService = dialogService;
        this.layoutService = layoutService;
        this.highlightService = highlightService;
        this.translationsService = translationsService;
        this.directionService = directionService;
        this.cd = cd;
        this.elementRef = elementRef;
        this.announcer = announcer;
        this.hasOverlay = false;
        this.isLoadingResults = true;
        this.isComponentDisplayed = true;
        this.isActive = false;
        this.isMobile = false;
        this.hiddenResults = [];
        this.plagFreeImg = IMAGES.PLAGIARISM_FREE_PNG;
    }
    get visibleResults() {
        return this.focusedMatch.ids.filter(id => !this.hiddenResults.includes(id));
    }
    /**
     * Displays the results filter dialog modal
     */
    openFilterDialog() {
        this.dialogService.open(ResultsFilterDialogComponent, {
            direction: this.directionService.dir,
            data: this.reportService,
        });
    }
    /**
     * Life-cycle method
     * subscribe to:
     * - filtered match previews
     * - currently selected match
     * - user configured hidden results
     * - layout changes
     */
    ngOnInit() {
        this.translations = this.translationsService.translations;
        const { filteredPreviews$, hiddenResults$, contentMode$, results$ } = this.reportService;
        const { originalText$, originalHtml$ } = this.highlightService;
        combineLatest([originalText$, originalHtml$, contentMode$])
            .pipe(untilDestroy(this), filter(_ => this.isComponentDisplayed))
            .subscribe(([text, html, content]) => {
            this.focusedMatch = content === 'text' ? text && text.match : html;
            this.cd.detectChanges();
        });
        filteredPreviews$.pipe(untilDestroy(this)).subscribe(previews => {
            this.previews = this.copyleaksService.sortScanResults(previews);
        });
        hiddenResults$.pipe(untilDestroy(this)).subscribe(ids => {
            this.hiddenResults = ids;
            this.highlightService.clear();
            this.highlightService.clearAllMatchs();
        });
        this.layoutService.isMobile$.pipe(untilDestroy(this)).subscribe(isMobile => (this.isMobile = isMobile));
        this.copyleaksService.onReportConfig$.pipe(untilDestroy(this)).subscribe(config => {
            this.checkAndAddOverlay(config);
        });
        results$.pipe(untilDestroy(this), delay(1000)).subscribe(results => {
            if (results?.length === this.previews?.length) {
                this.isLoadingResults = false;
            }
        });
        this.listenForDisplayChange();
    }
    /**
     * listener for display change
     */
    listenForDisplayChange() {
        const observer = new MutationObserver(() => {
            this.isComponentDisplayed = this.elementRef?.nativeElement?.style?.display !== 'none';
        });
        const target = this.elementRef.nativeElement;
        observer.observe(target, { attributes: true, attributeFilter: ['style'] });
    }
    /**
     * check if the results overlay component was passed
     */
    checkAndAddOverlay(config) {
        if (config && config.resultsOverlayComponent) {
            this.hasOverlay = true;
            if (!this.resultsOverlayComponentInstance) {
                const factory = this.componentFactoryResolver.resolveComponentFactory(config.resultsOverlayComponent);
                setTimeout(() => {
                    if (!this.resultsOverlayComponentInstance) {
                        const resultsOverlayComponentInstance = this.vcr?.createComponent(factory);
                        if (resultsOverlayComponentInstance) {
                            this.resultsOverlayComponentInstance = resultsOverlayComponentInstance;
                        }
                    }
                }, 100);
            }
        }
        else {
            this.hasOverlay = false;
        }
    }
    /**
     * Removes the focus of the currently focused match
     */
    clearFocusedMatch() {
        this.highlightService.setOriginalTextMatch(null);
        this.highlightService.setOriginalHtmlMatch(null);
        this.announcer.announce('Cleared focused', 'assertive');
    }
    /**
     * Life-cycle method
     * empty for `untilDestroy` rxjs operator
     */
    ngOnDestroy() { }
}
ResultsComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.3.3", ngImport: i0, type: ResultsComponent, deps: [{ token: i0.ComponentFactoryResolver }, { token: i1.CopyleaksService }, { token: i2.ReportService }, { token: i3.MatDialog }, { token: i4.LayoutMediaQueryService }, { token: i5.HighlightService }, { token: i6.CopyleaksTranslateService }, { token: i7.DirectionService }, { token: i0.ChangeDetectorRef }, { token: i0.ElementRef }, { token: i8.LiveAnnouncer }], target: i0.ɵɵFactoryTarget.Component });
ResultsComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "13.3.3", type: ResultsComponent, selector: "cr-results", host: { properties: { "class.active": "this.isActive", "class.mobile": "this.isMobile" } }, viewQueries: [{ propertyName: "vcr", first: true, predicate: ["vcr"], descendants: true, read: ViewContainerRef }], ngImport: i0, template: "<cr-panel>\n\t<cr-panel-header>\n\t\t<!--  -->\n\t\t<cls-spinner\n\t\t\tstyle=\"margin-right: 8px\"\n\t\t\ttitle=\"Spinner\"\n\t\t\t*ngIf=\"previews?.length && isLoadingResults\"\n\t\t\twidth=\"20px\"></cls-spinner>\n\t\t<!--  -->\n\t\t{{ translations?.RESULTS_SECTION?.TITLE || 'Results' }}\n\t\t<ng-container *ngIf=\"focusedMatch\">\n\t\t\t({{ visibleResults.length }} {{ translations?.SHARED?.OF || 'of' }} {{ previews?.length }})\n\t\t</ng-container>\n\t\t<!--  -->\n\t</cr-panel-header>\n\t<cr-panel-actions>\n\t\t<cr-panel-action *ngIf=\"focusedMatch\">\n\t\t\t<ng-container *ngTemplateOutlet=\"menu__show_results\"></ng-container>\n\t\t</cr-panel-action>\n\t\t<cr-panel-action *ngIf=\"isMobile\">\n\t\t\t<button mat-button [disabled]=\"!previews\" (click)=\"isActive = !isActive\" aria-label=\"expend actions\">\n\t\t\t\t<mat-icon [svgIcon]=\"isActive ? 'arrow_downward' : 'arrow_upward'\"></mat-icon>\n\t\t\t</button>\n\t\t</cr-panel-action>\n\t\t<cr-panel-action *ngIf=\"!isMobile || isActive\">\n\t\t\t<div id=\"cr-hint-results-filter-list\"></div>\n\t\t\t<button\n\t\t\t\ttitle=\"Filter results\"\n\t\t\t\ttabindex=\"0\"\n\t\t\t\trole=\"button\"\n\t\t\t\tmat-button\n\t\t\t\t[ngClass]=\"{ 'mat-stroked-button mat-warn': hiddenResults.length }\"\n\t\t\t\t[disabled]=\"!previews || hasOverlay\"\n\t\t\t\t[matTooltip]=\"\n\t\t\t\t\thiddenResults.length\n\t\t\t\t\t\t? hiddenResults.length + (translations?.RESULTS_SECTION?.FILTERED_RESULTS_TOOLTIP || ' results are hidden')\n\t\t\t\t\t\t: translations?.RESULTS_SECTION?.FILTER_TOOLTIP || 'Filter results'\n\t\t\t\t\"\n\t\t\t\t(click)=\"openFilterDialog()\"\n\t\t\t\taria-label=\"Opens a dialog to filter out results from report.\">\n\t\t\t\t<mat-icon [svgIcon]=\"hiddenResults.length ? 'filter_list_color_red' : 'filter_list'\"></mat-icon>\n\t\t\t</button>\n\t\t</cr-panel-action>\n\t</cr-panel-actions>\n\t<cr-panel-body fxLayout=\"column\" fxFlex=\"100\">\n\t\t<div id=\"cr-hint-results-card\"></div>\n\t\t<ng-container *ngIf=\"hasOverlay\">\n\t\t\t<div class=\"overlay-component-wrapper\">\n\t\t\t\t<ng-container #vcr></ng-container>\n\t\t\t</div>\n\t\t</ng-container>\n\t\t<cr-plagiarism-free\n\t\t\t*ngIf=\"previews && previews.length === 0\"\n\t\t\t[ngClass]=\"hasOverlay ? 'blur' : ''\"></cr-plagiarism-free>\n\t\t<virtual-scroller\n\t\t\t*ngIf=\"previews\"\n\t\t\t[ngClass]=\"hasOverlay ? 'blur' : ''\"\n\t\t\t[bufferAmount]=\"7\"\n\t\t\t#scroll\n\t\t\tfxFlex\n\t\t\t[items]=\"previews | whitelist : 'id' : focusedMatch?.ids\">\n\t\t\t<cr-result-card *ngFor=\"let preview of scroll.viewPortItems\" [preview]=\"preview\"></cr-result-card>\n\t\t</virtual-scroller>\n\t\t<virtual-scroller *ngIf=\"!previews\" [ngClass]=\"hasOverlay ? 'blur' : ''\" #scroll fxFlex [items]=\"[1, 2, 3, 4]\">\n\t\t\t<cr-result-card *ngFor=\"let preview of scroll.viewPortItems\"></cr-result-card>\n\t\t</virtual-scroller>\n\t\t<div class=\"powered-by-section\">\n\t\t\t<cr-powered-by></cr-powered-by>\n\t\t</div>\n\t</cr-panel-body>\n</cr-panel>\n<ng-template #menu__show_results>\n\t<button\n\t\taria-label=\"Clear focused results\"\n\t\t[title]=\"translations?.RESULTS_SECTION?.CLEAR_FILTER || 'Clear focused'\"\n\t\tmat-button\n\t\t(click)=\"clearFocusedMatch()\"\n\t\t[matTooltip]=\"translations?.RESULTS_SECTION?.CLEAR_FILTER || 'Clear focused'\">\n\t\t<mat-icon>close</mat-icon>\n\t</button>\n</ng-template>\n\n<ng-template #skeleton__fakes>\n\t<cr-result-card></cr-result-card>\n\t<cr-result-card></cr-result-card>\n\t<cr-result-card></cr-result-card>\n</ng-template>\n", styles: [".sat-tooltip{color:#fff;border-radius:4px;margin:14px;max-width:250px;padding:.5em;overflow:hidden;text-overflow:ellipsis;background:rgba(0,0,0,.8)}.identical{background-color:#ff796e}.minor-changes{background-color:#ff9a9a}.related{background-color:#ffd9b0}.omitted{background-color:#fff}.text-identical{color:#ff796e}.text-minor-changes{color:#ff9a9a}.text-related{color:#ffd9b0}.dot{border:1px solid #171717;width:1.5em;min-width:1.5em;min-height:1.5em;height:1.5em;border-radius:50%}@media screen and (max-width: 959px){.dot{width:1em;min-width:1em;min-height:1em;height:1em}}.copyleaks-report-dialog .mat-dialog-container{padding:0}.cdk-keyboard-focused{outline:2px solid black!important}:host{background-color:#fff;overflow:hidden}cr-panel{flex:1;height:100%}cr-panel cr-panel-header{text-transform:uppercase}cr-panel-body{position:relative}cr-panel-body .overlay-component-wrapper{position:absolute;display:flex;right:0;left:0;bottom:0;top:0;z-index:1}cr-panel-body cdk-virtual-scroll-viewport{padding:1em;margin:-1em;scrollbar-width:0px;overflow-y:scroll}cr-panel-body cdk-virtual-scroll-viewport ::ng-deep .cdk-virtual-scroll-content-wrapper{max-width:100%}cr-panel-body cdk-virtual-scroll-viewport ::ng-deep .cdk-virtual-scroll-spacer:nth-child(0),cr-panel-body cdk-virtual-scroll-viewport ::ng-deep .cdk-virtual-scroll-spacer:nth-child(1),cr-panel-body cdk-virtual-scroll-viewport ::ng-deep .cdk-virtual-scroll-spacer:nth-child(2),cr-panel-body cdk-virtual-scroll-viewport ::ng-deep .cdk-virtual-scroll-spacer:nth-child(3){transform:scaleY(0)}@media screen and (max-width: 599px){cr-panel-body cdk-virtual-scroll-viewport{padding:.5em;margin:0 -.5em}}@media screen and (max-width: 599px){cr-panel-body{margin-top:0}}[skeleton__card] mat-divider{margin:1em -1em}[skeleton__card] [footer]{height:28px}[skeleton__card] ngx-skeleton-loader:nth-child(5n+1){width:.88}[skeleton__card] ngx-skeleton-loader:nth-child(5n+2){width:.94}[skeleton__card] ngx-skeleton-loader:nth-child(5n+3){width:.71}[skeleton__card] ngx-skeleton-loader:nth-child(5n+4){width:.87}[skeleton__card] ngx-skeleton-loader:nth-child(5n+5){width:.82}[mat-button]{min-width:36px;padding:0}.blur{filter:blur(5px);overflow:hidden!important}.powered-by-section cr-powered-by{height:44px;padding-top:1px;border-top:1px solid rgba(0,0,0,.12);margin-top:12px;margin-bottom:-4px}#cr-hint-results-filter-list{position:relative;top:-5px;right:-11px}#cr-hint-results-card{transform:translate(45%)}\n"], components: [{ type: i9.PanelComponent, selector: "cr-panel" }, { type: i9.PanelHeaderComponent, selector: "cr-panel-header" }, { type: i10.SpinnerComponent, selector: "cls-spinner", inputs: ["width", "color"] }, { type: i9.PanelActionsComponent, selector: "cr-panel-actions" }, { type: i9.PanelActionComponent, selector: "cr-panel-action" }, { type: i11.MatButton, selector: "button[mat-button], button[mat-raised-button], button[mat-icon-button],             button[mat-fab], button[mat-mini-fab], button[mat-stroked-button],             button[mat-flat-button]", inputs: ["disabled", "disableRipple", "color"], exportAs: ["matButton"] }, { type: i12.MatIcon, selector: "mat-icon", inputs: ["color", "inline", "svgIcon", "fontSet", "fontIcon"], exportAs: ["matIcon"] }, { type: i9.PanelBodyComponent, selector: "cr-panel-body" }, { type: i13.PlagiarismFreeComponent, selector: "cr-plagiarism-free" }, { type: i14.VirtualScrollerComponent, selector: "virtual-scroller,[virtualScroller]", inputs: ["executeRefreshOutsideAngularZone", "RTL", "useMarginInsteadOfTranslate", "ssrViewportWidth", "ssrViewportHeight", "compareItems", "checkResizeInterval", "modifyOverflowStyleOfParentScroll", "resizeBypassRefreshThreshold", "scrollAnimationTime", "scrollDebounceTime", "scrollThrottlingTime", "scrollbarHeight", "scrollbarWidth", "stripedTable", "horizontal", "enableUnequalChildrenSizes", "bufferAmount", "items", "parentScroll", "childWidth", "childHeight", "ssrChildWidth", "ssrChildHeight"], outputs: ["vsUpdate", "vsChange", "vsStart", "vsEnd"], exportAs: ["virtualScroller"] }, { type: i15.ResultCardComponent, selector: "cr-result-card", inputs: ["preview"] }, { type: i16.PoweredByComponent, selector: "cr-powered-by" }], directives: [{ type: i17.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i17.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet"] }, { type: i17.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { type: i18.DefaultClassDirective, selector: "  [ngClass], [ngClass.xs], [ngClass.sm], [ngClass.md], [ngClass.lg], [ngClass.xl],  [ngClass.lt-sm], [ngClass.lt-md], [ngClass.lt-lg], [ngClass.lt-xl],  [ngClass.gt-xs], [ngClass.gt-sm], [ngClass.gt-md], [ngClass.gt-lg]", inputs: ["ngClass", "ngClass.xs", "ngClass.sm", "ngClass.md", "ngClass.lg", "ngClass.xl", "ngClass.lt-sm", "ngClass.lt-md", "ngClass.lt-lg", "ngClass.lt-xl", "ngClass.gt-xs", "ngClass.gt-sm", "ngClass.gt-md", "ngClass.gt-lg"] }, { type: i19.MatTooltip, selector: "[matTooltip]", exportAs: ["matTooltip"] }, { type: i20.DefaultLayoutDirective, selector: "  [fxLayout], [fxLayout.xs], [fxLayout.sm], [fxLayout.md],  [fxLayout.lg], [fxLayout.xl], [fxLayout.lt-sm], [fxLayout.lt-md],  [fxLayout.lt-lg], [fxLayout.lt-xl], [fxLayout.gt-xs], [fxLayout.gt-sm],  [fxLayout.gt-md], [fxLayout.gt-lg]", inputs: ["fxLayout", "fxLayout.xs", "fxLayout.sm", "fxLayout.md", "fxLayout.lg", "fxLayout.xl", "fxLayout.lt-sm", "fxLayout.lt-md", "fxLayout.lt-lg", "fxLayout.lt-xl", "fxLayout.gt-xs", "fxLayout.gt-sm", "fxLayout.gt-md", "fxLayout.gt-lg"] }, { type: i20.DefaultFlexDirective, selector: "  [fxFlex], [fxFlex.xs], [fxFlex.sm], [fxFlex.md],  [fxFlex.lg], [fxFlex.xl], [fxFlex.lt-sm], [fxFlex.lt-md],  [fxFlex.lt-lg], [fxFlex.lt-xl], [fxFlex.gt-xs], [fxFlex.gt-sm],  [fxFlex.gt-md], [fxFlex.gt-lg]", inputs: ["fxFlex", "fxFlex.xs", "fxFlex.sm", "fxFlex.md", "fxFlex.lg", "fxFlex.xl", "fxFlex.lt-sm", "fxFlex.lt-md", "fxFlex.lt-lg", "fxFlex.lt-xl", "fxFlex.gt-xs", "fxFlex.gt-sm", "fxFlex.gt-md", "fxFlex.gt-lg"] }, { type: i17.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }], pipes: { "whitelist": i21.WhitelistPipe }, animations: [] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.3.3", ngImport: i0, type: ResultsComponent, decorators: [{
            type: Component,
            args: [{ selector: 'cr-results', animations: [], template: "<cr-panel>\n\t<cr-panel-header>\n\t\t<!--  -->\n\t\t<cls-spinner\n\t\t\tstyle=\"margin-right: 8px\"\n\t\t\ttitle=\"Spinner\"\n\t\t\t*ngIf=\"previews?.length && isLoadingResults\"\n\t\t\twidth=\"20px\"></cls-spinner>\n\t\t<!--  -->\n\t\t{{ translations?.RESULTS_SECTION?.TITLE || 'Results' }}\n\t\t<ng-container *ngIf=\"focusedMatch\">\n\t\t\t({{ visibleResults.length }} {{ translations?.SHARED?.OF || 'of' }} {{ previews?.length }})\n\t\t</ng-container>\n\t\t<!--  -->\n\t</cr-panel-header>\n\t<cr-panel-actions>\n\t\t<cr-panel-action *ngIf=\"focusedMatch\">\n\t\t\t<ng-container *ngTemplateOutlet=\"menu__show_results\"></ng-container>\n\t\t</cr-panel-action>\n\t\t<cr-panel-action *ngIf=\"isMobile\">\n\t\t\t<button mat-button [disabled]=\"!previews\" (click)=\"isActive = !isActive\" aria-label=\"expend actions\">\n\t\t\t\t<mat-icon [svgIcon]=\"isActive ? 'arrow_downward' : 'arrow_upward'\"></mat-icon>\n\t\t\t</button>\n\t\t</cr-panel-action>\n\t\t<cr-panel-action *ngIf=\"!isMobile || isActive\">\n\t\t\t<div id=\"cr-hint-results-filter-list\"></div>\n\t\t\t<button\n\t\t\t\ttitle=\"Filter results\"\n\t\t\t\ttabindex=\"0\"\n\t\t\t\trole=\"button\"\n\t\t\t\tmat-button\n\t\t\t\t[ngClass]=\"{ 'mat-stroked-button mat-warn': hiddenResults.length }\"\n\t\t\t\t[disabled]=\"!previews || hasOverlay\"\n\t\t\t\t[matTooltip]=\"\n\t\t\t\t\thiddenResults.length\n\t\t\t\t\t\t? hiddenResults.length + (translations?.RESULTS_SECTION?.FILTERED_RESULTS_TOOLTIP || ' results are hidden')\n\t\t\t\t\t\t: translations?.RESULTS_SECTION?.FILTER_TOOLTIP || 'Filter results'\n\t\t\t\t\"\n\t\t\t\t(click)=\"openFilterDialog()\"\n\t\t\t\taria-label=\"Opens a dialog to filter out results from report.\">\n\t\t\t\t<mat-icon [svgIcon]=\"hiddenResults.length ? 'filter_list_color_red' : 'filter_list'\"></mat-icon>\n\t\t\t</button>\n\t\t</cr-panel-action>\n\t</cr-panel-actions>\n\t<cr-panel-body fxLayout=\"column\" fxFlex=\"100\">\n\t\t<div id=\"cr-hint-results-card\"></div>\n\t\t<ng-container *ngIf=\"hasOverlay\">\n\t\t\t<div class=\"overlay-component-wrapper\">\n\t\t\t\t<ng-container #vcr></ng-container>\n\t\t\t</div>\n\t\t</ng-container>\n\t\t<cr-plagiarism-free\n\t\t\t*ngIf=\"previews && previews.length === 0\"\n\t\t\t[ngClass]=\"hasOverlay ? 'blur' : ''\"></cr-plagiarism-free>\n\t\t<virtual-scroller\n\t\t\t*ngIf=\"previews\"\n\t\t\t[ngClass]=\"hasOverlay ? 'blur' : ''\"\n\t\t\t[bufferAmount]=\"7\"\n\t\t\t#scroll\n\t\t\tfxFlex\n\t\t\t[items]=\"previews | whitelist : 'id' : focusedMatch?.ids\">\n\t\t\t<cr-result-card *ngFor=\"let preview of scroll.viewPortItems\" [preview]=\"preview\"></cr-result-card>\n\t\t</virtual-scroller>\n\t\t<virtual-scroller *ngIf=\"!previews\" [ngClass]=\"hasOverlay ? 'blur' : ''\" #scroll fxFlex [items]=\"[1, 2, 3, 4]\">\n\t\t\t<cr-result-card *ngFor=\"let preview of scroll.viewPortItems\"></cr-result-card>\n\t\t</virtual-scroller>\n\t\t<div class=\"powered-by-section\">\n\t\t\t<cr-powered-by></cr-powered-by>\n\t\t</div>\n\t</cr-panel-body>\n</cr-panel>\n<ng-template #menu__show_results>\n\t<button\n\t\taria-label=\"Clear focused results\"\n\t\t[title]=\"translations?.RESULTS_SECTION?.CLEAR_FILTER || 'Clear focused'\"\n\t\tmat-button\n\t\t(click)=\"clearFocusedMatch()\"\n\t\t[matTooltip]=\"translations?.RESULTS_SECTION?.CLEAR_FILTER || 'Clear focused'\">\n\t\t<mat-icon>close</mat-icon>\n\t</button>\n</ng-template>\n\n<ng-template #skeleton__fakes>\n\t<cr-result-card></cr-result-card>\n\t<cr-result-card></cr-result-card>\n\t<cr-result-card></cr-result-card>\n</ng-template>\n", styles: [".sat-tooltip{color:#fff;border-radius:4px;margin:14px;max-width:250px;padding:.5em;overflow:hidden;text-overflow:ellipsis;background:rgba(0,0,0,.8)}.identical{background-color:#ff796e}.minor-changes{background-color:#ff9a9a}.related{background-color:#ffd9b0}.omitted{background-color:#fff}.text-identical{color:#ff796e}.text-minor-changes{color:#ff9a9a}.text-related{color:#ffd9b0}.dot{border:1px solid #171717;width:1.5em;min-width:1.5em;min-height:1.5em;height:1.5em;border-radius:50%}@media screen and (max-width: 959px){.dot{width:1em;min-width:1em;min-height:1em;height:1em}}.copyleaks-report-dialog .mat-dialog-container{padding:0}.cdk-keyboard-focused{outline:2px solid black!important}:host{background-color:#fff;overflow:hidden}cr-panel{flex:1;height:100%}cr-panel cr-panel-header{text-transform:uppercase}cr-panel-body{position:relative}cr-panel-body .overlay-component-wrapper{position:absolute;display:flex;right:0;left:0;bottom:0;top:0;z-index:1}cr-panel-body cdk-virtual-scroll-viewport{padding:1em;margin:-1em;scrollbar-width:0px;overflow-y:scroll}cr-panel-body cdk-virtual-scroll-viewport ::ng-deep .cdk-virtual-scroll-content-wrapper{max-width:100%}cr-panel-body cdk-virtual-scroll-viewport ::ng-deep .cdk-virtual-scroll-spacer:nth-child(0),cr-panel-body cdk-virtual-scroll-viewport ::ng-deep .cdk-virtual-scroll-spacer:nth-child(1),cr-panel-body cdk-virtual-scroll-viewport ::ng-deep .cdk-virtual-scroll-spacer:nth-child(2),cr-panel-body cdk-virtual-scroll-viewport ::ng-deep .cdk-virtual-scroll-spacer:nth-child(3){transform:scaleY(0)}@media screen and (max-width: 599px){cr-panel-body cdk-virtual-scroll-viewport{padding:.5em;margin:0 -.5em}}@media screen and (max-width: 599px){cr-panel-body{margin-top:0}}[skeleton__card] mat-divider{margin:1em -1em}[skeleton__card] [footer]{height:28px}[skeleton__card] ngx-skeleton-loader:nth-child(5n+1){width:.88}[skeleton__card] ngx-skeleton-loader:nth-child(5n+2){width:.94}[skeleton__card] ngx-skeleton-loader:nth-child(5n+3){width:.71}[skeleton__card] ngx-skeleton-loader:nth-child(5n+4){width:.87}[skeleton__card] ngx-skeleton-loader:nth-child(5n+5){width:.82}[mat-button]{min-width:36px;padding:0}.blur{filter:blur(5px);overflow:hidden!important}.powered-by-section cr-powered-by{height:44px;padding-top:1px;border-top:1px solid rgba(0,0,0,.12);margin-top:12px;margin-bottom:-4px}#cr-hint-results-filter-list{position:relative;top:-5px;right:-11px}#cr-hint-results-card{transform:translate(45%)}\n"] }]
        }], ctorParameters: function () { return [{ type: i0.ComponentFactoryResolver }, { type: i1.CopyleaksService }, { type: i2.ReportService }, { type: i3.MatDialog }, { type: i4.LayoutMediaQueryService }, { type: i5.HighlightService }, { type: i6.CopyleaksTranslateService }, { type: i7.DirectionService }, { type: i0.ChangeDetectorRef }, { type: i0.ElementRef }, { type: i8.LiveAnnouncer }]; }, propDecorators: { vcr: [{
                type: ViewChild,
                args: ['vcr', { read: ViewContainerRef }]
            }], isActive: [{
                type: HostBinding,
                args: ['class.active']
            }], isMobile: [{
                type: HostBinding,
                args: ['class.mobile']
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVzdWx0cy5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9wbGFnaWFyaXNtLXJlcG9ydC9zcmMvbGliL3BsYWdpYXJpc20tcmVwb3J0L2NvbXBvbmVudHMvcmVzdWx0cy9yZXN1bHRzLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3BsYWdpYXJpc20tcmVwb3J0L3NyYy9saWIvcGxhZ2lhcmlzbS1yZXBvcnQvY29tcG9uZW50cy9yZXN1bHRzL3Jlc3VsdHMuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUVOLFNBQVMsRUFHVCxXQUFXLEVBR1gsU0FBUyxFQUNULGdCQUFnQixHQUNoQixNQUFNLGVBQWUsQ0FBQztBQUV2QixPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQ3JDLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDL0MsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLHdDQUF3QyxDQUFDO0FBQ3RFLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQVE3QyxPQUFPLEVBQUUsNEJBQTRCLEVBQUUsTUFBTSwwREFBMEQsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFReEcsTUFBTSxPQUFPLGdCQUFnQjtJQVM1QixZQUNTLHdCQUFrRCxFQUNsRCxnQkFBa0MsRUFDbEMsYUFBNEIsRUFDNUIsYUFBd0IsRUFDeEIsYUFBc0MsRUFDdEMsZ0JBQWtDLEVBQ2xDLG1CQUE4QyxFQUM5QyxnQkFBa0MsRUFDbEMsRUFBcUIsRUFDckIsVUFBbUMsRUFDbkMsU0FBd0I7UUFWeEIsNkJBQXdCLEdBQXhCLHdCQUF3QixDQUEwQjtRQUNsRCxxQkFBZ0IsR0FBaEIsZ0JBQWdCLENBQWtCO1FBQ2xDLGtCQUFhLEdBQWIsYUFBYSxDQUFlO1FBQzVCLGtCQUFhLEdBQWIsYUFBYSxDQUFXO1FBQ3hCLGtCQUFhLEdBQWIsYUFBYSxDQUF5QjtRQUN0QyxxQkFBZ0IsR0FBaEIsZ0JBQWdCLENBQWtCO1FBQ2xDLHdCQUFtQixHQUFuQixtQkFBbUIsQ0FBMkI7UUFDOUMscUJBQWdCLEdBQWhCLGdCQUFnQixDQUFrQjtRQUNsQyxPQUFFLEdBQUYsRUFBRSxDQUFtQjtRQUNyQixlQUFVLEdBQVYsVUFBVSxDQUF5QjtRQUNuQyxjQUFTLEdBQVQsU0FBUyxDQUFlO1FBaEJqQyxlQUFVLEdBQUcsS0FBSyxDQUFDO1FBRW5CLHFCQUFnQixHQUFHLElBQUksQ0FBQztRQUN4Qix5QkFBb0IsR0FBRyxJQUFJLENBQUM7UUFnQkMsYUFBUSxHQUFHLEtBQUssQ0FBQztRQUNqQixhQUFRLEdBQUcsS0FBSyxDQUFDO1FBSXZDLGtCQUFhLEdBQWEsRUFBRSxDQUFDO1FBQ3BCLGdCQUFXLEdBQUcsTUFBTSxDQUFDLG1CQUFtQixDQUFDO0lBUnRELENBQUM7SUFTSixJQUFXLGNBQWM7UUFDeEIsT0FBTyxJQUFJLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDN0UsQ0FBQztJQUVEOztPQUVHO0lBQ0gsZ0JBQWdCO1FBQ2YsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQThDLDRCQUE0QixFQUFFO1lBQ2xHLFNBQVMsRUFBRSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsR0FBRztZQUNwQyxJQUFJLEVBQUUsSUFBSSxDQUFDLGFBQWE7U0FDeEIsQ0FBQyxDQUFDO0lBQ0osQ0FBQztJQUVEOzs7Ozs7O09BT0c7SUFDSCxRQUFRO1FBQ1AsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsbUJBQW1CLENBQUMsWUFBWSxDQUFDO1FBQzFELE1BQU0sRUFBRSxpQkFBaUIsRUFBRSxjQUFjLEVBQUUsWUFBWSxFQUFFLFFBQVEsRUFBRSxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUM7UUFDekYsTUFBTSxFQUFFLGFBQWEsRUFBRSxhQUFhLEVBQUUsR0FBRyxJQUFJLENBQUMsZ0JBQWdCLENBQUM7UUFDL0QsYUFBYSxDQUFDLENBQUMsYUFBYSxFQUFFLGFBQWEsRUFBRSxZQUFZLENBQUMsQ0FBQzthQUN6RCxJQUFJLENBQ0osWUFBWSxDQUFDLElBQUksQ0FBQyxFQUNsQixNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsb0JBQW9CLENBQUMsQ0FDdEM7YUFDQSxTQUFTLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsT0FBTyxDQUFDLEVBQUUsRUFBRTtZQUNwQyxJQUFJLENBQUMsWUFBWSxHQUFHLE9BQU8sS0FBSyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7WUFDbkUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxhQUFhLEVBQUUsQ0FBQztRQUN6QixDQUFDLENBQUMsQ0FBQztRQUVKLGlCQUFpQixDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFDL0QsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsZUFBZSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ2pFLENBQUMsQ0FBQyxDQUFDO1FBRUgsY0FBYyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLEVBQUU7WUFDdkQsSUFBSSxDQUFDLGFBQWEsR0FBRyxHQUFHLENBQUM7WUFDekIsSUFBSSxDQUFDLGdCQUFnQixDQUFDLEtBQUssRUFBRSxDQUFDO1lBQzlCLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxjQUFjLEVBQUUsQ0FBQztRQUN4QyxDQUFDLENBQUMsQ0FBQztRQUNILElBQUksQ0FBQyxhQUFhLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDLENBQUMsQ0FBQztRQUV4RyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFDakYsSUFBSSxDQUFDLGtCQUFrQixDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ2pDLENBQUMsQ0FBQyxDQUFDO1FBRUgsUUFBUSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLEVBQUUsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxFQUFFO1lBQ2xFLElBQUksT0FBTyxFQUFFLE1BQU0sS0FBSyxJQUFJLENBQUMsUUFBUSxFQUFFLE1BQU0sRUFBRTtnQkFDOUMsSUFBSSxDQUFDLGdCQUFnQixHQUFHLEtBQUssQ0FBQzthQUM5QjtRQUNGLENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLHNCQUFzQixFQUFFLENBQUM7SUFDL0IsQ0FBQztJQUVEOztPQUVHO0lBQ0ssc0JBQXNCO1FBQzdCLE1BQU0sUUFBUSxHQUFHLElBQUksZ0JBQWdCLENBQUMsR0FBRyxFQUFFO1lBQzFDLElBQUksQ0FBQyxvQkFBb0IsR0FBRyxJQUFJLENBQUMsVUFBVSxFQUFFLGFBQWEsRUFBRSxLQUFLLEVBQUUsT0FBTyxLQUFLLE1BQU0sQ0FBQztRQUN2RixDQUFDLENBQUMsQ0FBQztRQUVILE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsYUFBYSxDQUFDO1FBQzdDLFFBQVEsQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLEVBQUUsVUFBVSxFQUFFLElBQUksRUFBRSxlQUFlLEVBQUUsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDNUUsQ0FBQztJQUVEOztPQUVHO0lBQ0ssa0JBQWtCLENBQUMsTUFBNkI7UUFDdkQsSUFBSSxNQUFNLElBQUksTUFBTSxDQUFDLHVCQUF1QixFQUFFO1lBQzdDLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDO1lBQ3ZCLElBQUksQ0FBQyxJQUFJLENBQUMsK0JBQStCLEVBQUU7Z0JBQzFDLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyx3QkFBd0IsQ0FBQyx1QkFBdUIsQ0FBQyxNQUFNLENBQUMsdUJBQXVCLENBQUMsQ0FBQztnQkFDdEcsVUFBVSxDQUFDLEdBQUcsRUFBRTtvQkFDZixJQUFJLENBQUMsSUFBSSxDQUFDLCtCQUErQixFQUFFO3dCQUMxQyxNQUFNLCtCQUErQixHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsZUFBZSxDQUFDLE9BQU8sQ0FBQyxDQUFDO3dCQUMzRSxJQUFJLCtCQUErQixFQUFFOzRCQUNwQyxJQUFJLENBQUMsK0JBQStCLEdBQUcsK0JBQStCLENBQUM7eUJBQ3ZFO3FCQUNEO2dCQUNGLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQzthQUNSO1NBQ0Q7YUFBTTtZQUNOLElBQUksQ0FBQyxVQUFVLEdBQUcsS0FBSyxDQUFDO1NBQ3hCO0lBQ0YsQ0FBQztJQUVEOztPQUVHO0lBQ0gsaUJBQWlCO1FBQ2hCLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxvQkFBb0IsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNqRCxJQUFJLENBQUMsZ0JBQWdCLENBQUMsb0JBQW9CLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFakQsSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsaUJBQWlCLEVBQUUsV0FBVyxDQUFDLENBQUM7SUFDekQsQ0FBQztJQUVEOzs7T0FHRztJQUNILFdBQVcsS0FBSSxDQUFDOzs2R0ExSUosZ0JBQWdCO2lHQUFoQixnQkFBZ0IscU5BQ0YsZ0JBQWdCLDZCQ2hDM0MsaThHQXVGQSx3bE1EMURhLEVBQUU7MkZBRUYsZ0JBQWdCO2tCQU41QixTQUFTOytCQUNDLFlBQVksY0FHVixFQUFFO21hQUlkLEdBQUc7c0JBREYsU0FBUzt1QkFBQyxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsZ0JBQWdCLEVBQUU7Z0JBc0JmLFFBQVE7c0JBQXBDLFdBQVc7dUJBQUMsY0FBYztnQkFDRSxRQUFRO3NCQUFwQyxXQUFXO3VCQUFDLGNBQWMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuXHRDaGFuZ2VEZXRlY3RvclJlZixcblx0Q29tcG9uZW50LFxuXHRDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsXG5cdEVsZW1lbnRSZWYsXG5cdEhvc3RCaW5kaW5nLFxuXHRPbkRlc3Ryb3ksXG5cdE9uSW5pdCxcblx0Vmlld0NoaWxkLFxuXHRWaWV3Q29udGFpbmVyUmVmLFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE1hdERpYWxvZyB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL2RpYWxvZyc7XG5pbXBvcnQgeyBjb21iaW5lTGF0ZXN0IH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBkZWxheSwgZmlsdGVyIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHsgdW50aWxEZXN0cm95IH0gZnJvbSAnLi4vLi4vLi4vc2hhcmVkL29wZXJhdG9ycy91bnRpbERlc3Ryb3knO1xuaW1wb3J0IHsgSU1BR0VTIH0gZnJvbSAnLi4vLi4vYXNzZXRzL2ltYWdlcyc7XG5pbXBvcnQgeyBDb3B5bGVha3NSZXBvcnRDb25maWcsIE1hdGNoLCBSZXN1bHRQcmV2aWV3IH0gZnJvbSAnLi4vLi4vbW9kZWxzJztcbmltcG9ydCB7IENvcHlsZWFrc1RyYW5zbGF0ZVNlcnZpY2UsIENvcHlsZWFrc1RyYW5zbGF0aW9ucyB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL2NvcHlsZWFrcy10cmFuc2xhdGUuc2VydmljZSc7XG5pbXBvcnQgeyBDb3B5bGVha3NTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvY29weWxlYWtzLnNlcnZpY2UnO1xuaW1wb3J0IHsgRGlyZWN0aW9uU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL2RpcmVjdGlvbi5zZXJ2aWNlJztcbmltcG9ydCB7IEhpZ2hsaWdodFNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9oaWdobGlnaHQuc2VydmljZSc7XG5pbXBvcnQgeyBMYXlvdXRNZWRpYVF1ZXJ5U2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL2xheW91dC1tZWRpYS1xdWVyeS5zZXJ2aWNlJztcbmltcG9ydCB7IFJlcG9ydFNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9yZXBvcnQuc2VydmljZSc7XG5pbXBvcnQgeyBSZXN1bHRzRmlsdGVyRGlhbG9nQ29tcG9uZW50IH0gZnJvbSAnLi4vcmVzdWx0cy1maWx0ZXItZGlhbG9nL3Jlc3VsdHMtZmlsdGVyLWRpYWxvZy5jb21wb25lbnQnO1xuaW1wb3J0IHsgTGl2ZUFubm91bmNlciB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9hMTF5JztcbkBDb21wb25lbnQoe1xuXHRzZWxlY3RvcjogJ2NyLXJlc3VsdHMnLFxuXHR0ZW1wbGF0ZVVybDogJy4vcmVzdWx0cy5jb21wb25lbnQuaHRtbCcsXG5cdHN0eWxlVXJsczogWycuL3Jlc3VsdHMuY29tcG9uZW50LnNjc3MnXSxcblx0YW5pbWF0aW9uczogW10sXG59KVxuZXhwb3J0IGNsYXNzIFJlc3VsdHNDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uRGVzdHJveSB7XG5cdEBWaWV3Q2hpbGQoJ3ZjcicsIHsgcmVhZDogVmlld0NvbnRhaW5lclJlZiB9KVxuXHR2Y3I6IFZpZXdDb250YWluZXJSZWY7XG5cdHJlc3VsdHNPdmVybGF5Q29tcG9uZW50SW5zdGFuY2U6IGFueTtcblx0aGFzT3ZlcmxheSA9IGZhbHNlO1xuXHR0cmFuc2xhdGlvbnM6IENvcHlsZWFrc1RyYW5zbGF0aW9ucztcblx0aXNMb2FkaW5nUmVzdWx0cyA9IHRydWU7XG5cdGlzQ29tcG9uZW50RGlzcGxheWVkID0gdHJ1ZTtcblxuXHRjb25zdHJ1Y3Rvcihcblx0XHRwcml2YXRlIGNvbXBvbmVudEZhY3RvcnlSZXNvbHZlcjogQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLFxuXHRcdHByaXZhdGUgY29weWxlYWtzU2VydmljZTogQ29weWxlYWtzU2VydmljZSxcblx0XHRwcml2YXRlIHJlcG9ydFNlcnZpY2U6IFJlcG9ydFNlcnZpY2UsXG5cdFx0cHJpdmF0ZSBkaWFsb2dTZXJ2aWNlOiBNYXREaWFsb2csXG5cdFx0cHJpdmF0ZSBsYXlvdXRTZXJ2aWNlOiBMYXlvdXRNZWRpYVF1ZXJ5U2VydmljZSxcblx0XHRwcml2YXRlIGhpZ2hsaWdodFNlcnZpY2U6IEhpZ2hsaWdodFNlcnZpY2UsXG5cdFx0cHJpdmF0ZSB0cmFuc2xhdGlvbnNTZXJ2aWNlOiBDb3B5bGVha3NUcmFuc2xhdGVTZXJ2aWNlLFxuXHRcdHByaXZhdGUgZGlyZWN0aW9uU2VydmljZTogRGlyZWN0aW9uU2VydmljZSxcblx0XHRwcml2YXRlIGNkOiBDaGFuZ2VEZXRlY3RvclJlZixcblx0XHRwcml2YXRlIGVsZW1lbnRSZWY6IEVsZW1lbnRSZWY8SFRNTEVsZW1lbnQ+LFxuXHRcdHByaXZhdGUgYW5ub3VuY2VyOiBMaXZlQW5ub3VuY2VyXG5cdCkge31cblxuXHRASG9zdEJpbmRpbmcoJ2NsYXNzLmFjdGl2ZScpIGlzQWN0aXZlID0gZmFsc2U7XG5cdEBIb3N0QmluZGluZygnY2xhc3MubW9iaWxlJykgaXNNb2JpbGUgPSBmYWxzZTtcblxuXHRwdWJsaWMgcHJldmlld3M6IFJlc3VsdFByZXZpZXdbXTtcblx0cHVibGljIGZvY3VzZWRNYXRjaDogTWF0Y2g7XG5cdHB1YmxpYyBoaWRkZW5SZXN1bHRzOiBzdHJpbmdbXSA9IFtdO1xuXHRwdWJsaWMgcmVhZG9ubHkgcGxhZ0ZyZWVJbWcgPSBJTUFHRVMuUExBR0lBUklTTV9GUkVFX1BORztcblx0cHVibGljIGdldCB2aXNpYmxlUmVzdWx0cygpIHtcblx0XHRyZXR1cm4gdGhpcy5mb2N1c2VkTWF0Y2guaWRzLmZpbHRlcihpZCA9PiAhdGhpcy5oaWRkZW5SZXN1bHRzLmluY2x1ZGVzKGlkKSk7XG5cdH1cblxuXHQvKipcblx0ICogRGlzcGxheXMgdGhlIHJlc3VsdHMgZmlsdGVyIGRpYWxvZyBtb2RhbFxuXHQgKi9cblx0b3BlbkZpbHRlckRpYWxvZygpIHtcblx0XHR0aGlzLmRpYWxvZ1NlcnZpY2Uub3BlbjxSZXN1bHRzRmlsdGVyRGlhbG9nQ29tcG9uZW50LCBSZXBvcnRTZXJ2aWNlPihSZXN1bHRzRmlsdGVyRGlhbG9nQ29tcG9uZW50LCB7XG5cdFx0XHRkaXJlY3Rpb246IHRoaXMuZGlyZWN0aW9uU2VydmljZS5kaXIsXG5cdFx0XHRkYXRhOiB0aGlzLnJlcG9ydFNlcnZpY2UsXG5cdFx0fSk7XG5cdH1cblxuXHQvKipcblx0ICogTGlmZS1jeWNsZSBtZXRob2Rcblx0ICogc3Vic2NyaWJlIHRvOlxuXHQgKiAtIGZpbHRlcmVkIG1hdGNoIHByZXZpZXdzXG5cdCAqIC0gY3VycmVudGx5IHNlbGVjdGVkIG1hdGNoXG5cdCAqIC0gdXNlciBjb25maWd1cmVkIGhpZGRlbiByZXN1bHRzXG5cdCAqIC0gbGF5b3V0IGNoYW5nZXNcblx0ICovXG5cdG5nT25Jbml0KCkge1xuXHRcdHRoaXMudHJhbnNsYXRpb25zID0gdGhpcy50cmFuc2xhdGlvbnNTZXJ2aWNlLnRyYW5zbGF0aW9ucztcblx0XHRjb25zdCB7IGZpbHRlcmVkUHJldmlld3MkLCBoaWRkZW5SZXN1bHRzJCwgY29udGVudE1vZGUkLCByZXN1bHRzJCB9ID0gdGhpcy5yZXBvcnRTZXJ2aWNlO1xuXHRcdGNvbnN0IHsgb3JpZ2luYWxUZXh0JCwgb3JpZ2luYWxIdG1sJCB9ID0gdGhpcy5oaWdobGlnaHRTZXJ2aWNlO1xuXHRcdGNvbWJpbmVMYXRlc3QoW29yaWdpbmFsVGV4dCQsIG9yaWdpbmFsSHRtbCQsIGNvbnRlbnRNb2RlJF0pXG5cdFx0XHQucGlwZShcblx0XHRcdFx0dW50aWxEZXN0cm95KHRoaXMpLFxuXHRcdFx0XHRmaWx0ZXIoXyA9PiB0aGlzLmlzQ29tcG9uZW50RGlzcGxheWVkKVxuXHRcdFx0KVxuXHRcdFx0LnN1YnNjcmliZSgoW3RleHQsIGh0bWwsIGNvbnRlbnRdKSA9PiB7XG5cdFx0XHRcdHRoaXMuZm9jdXNlZE1hdGNoID0gY29udGVudCA9PT0gJ3RleHQnID8gdGV4dCAmJiB0ZXh0Lm1hdGNoIDogaHRtbDtcblx0XHRcdFx0dGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XG5cdFx0XHR9KTtcblxuXHRcdGZpbHRlcmVkUHJldmlld3MkLnBpcGUodW50aWxEZXN0cm95KHRoaXMpKS5zdWJzY3JpYmUocHJldmlld3MgPT4ge1xuXHRcdFx0dGhpcy5wcmV2aWV3cyA9IHRoaXMuY29weWxlYWtzU2VydmljZS5zb3J0U2NhblJlc3VsdHMocHJldmlld3MpO1xuXHRcdH0pO1xuXG5cdFx0aGlkZGVuUmVzdWx0cyQucGlwZSh1bnRpbERlc3Ryb3kodGhpcykpLnN1YnNjcmliZShpZHMgPT4ge1xuXHRcdFx0dGhpcy5oaWRkZW5SZXN1bHRzID0gaWRzO1xuXHRcdFx0dGhpcy5oaWdobGlnaHRTZXJ2aWNlLmNsZWFyKCk7XG5cdFx0XHR0aGlzLmhpZ2hsaWdodFNlcnZpY2UuY2xlYXJBbGxNYXRjaHMoKTtcblx0XHR9KTtcblx0XHR0aGlzLmxheW91dFNlcnZpY2UuaXNNb2JpbGUkLnBpcGUodW50aWxEZXN0cm95KHRoaXMpKS5zdWJzY3JpYmUoaXNNb2JpbGUgPT4gKHRoaXMuaXNNb2JpbGUgPSBpc01vYmlsZSkpO1xuXG5cdFx0dGhpcy5jb3B5bGVha3NTZXJ2aWNlLm9uUmVwb3J0Q29uZmlnJC5waXBlKHVudGlsRGVzdHJveSh0aGlzKSkuc3Vic2NyaWJlKGNvbmZpZyA9PiB7XG5cdFx0XHR0aGlzLmNoZWNrQW5kQWRkT3ZlcmxheShjb25maWcpO1xuXHRcdH0pO1xuXG5cdFx0cmVzdWx0cyQucGlwZSh1bnRpbERlc3Ryb3kodGhpcyksIGRlbGF5KDEwMDApKS5zdWJzY3JpYmUocmVzdWx0cyA9PiB7XG5cdFx0XHRpZiAocmVzdWx0cz8ubGVuZ3RoID09PSB0aGlzLnByZXZpZXdzPy5sZW5ndGgpIHtcblx0XHRcdFx0dGhpcy5pc0xvYWRpbmdSZXN1bHRzID0gZmFsc2U7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHR0aGlzLmxpc3RlbkZvckRpc3BsYXlDaGFuZ2UoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBsaXN0ZW5lciBmb3IgZGlzcGxheSBjaGFuZ2Vcblx0ICovXG5cdHByaXZhdGUgbGlzdGVuRm9yRGlzcGxheUNoYW5nZSgpIHtcblx0XHRjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHtcblx0XHRcdHRoaXMuaXNDb21wb25lbnREaXNwbGF5ZWQgPSB0aGlzLmVsZW1lbnRSZWY/Lm5hdGl2ZUVsZW1lbnQ/LnN0eWxlPy5kaXNwbGF5ICE9PSAnbm9uZSc7XG5cdFx0fSk7XG5cblx0XHRjb25zdCB0YXJnZXQgPSB0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudDtcblx0XHRvYnNlcnZlci5vYnNlcnZlKHRhcmdldCwgeyBhdHRyaWJ1dGVzOiB0cnVlLCBhdHRyaWJ1dGVGaWx0ZXI6IFsnc3R5bGUnXSB9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBjaGVjayBpZiB0aGUgcmVzdWx0cyBvdmVybGF5IGNvbXBvbmVudCB3YXMgcGFzc2VkXG5cdCAqL1xuXHRwcml2YXRlIGNoZWNrQW5kQWRkT3ZlcmxheShjb25maWc6IENvcHlsZWFrc1JlcG9ydENvbmZpZykge1xuXHRcdGlmIChjb25maWcgJiYgY29uZmlnLnJlc3VsdHNPdmVybGF5Q29tcG9uZW50KSB7XG5cdFx0XHR0aGlzLmhhc092ZXJsYXkgPSB0cnVlO1xuXHRcdFx0aWYgKCF0aGlzLnJlc3VsdHNPdmVybGF5Q29tcG9uZW50SW5zdGFuY2UpIHtcblx0XHRcdFx0Y29uc3QgZmFjdG9yeSA9IHRoaXMuY29tcG9uZW50RmFjdG9yeVJlc29sdmVyLnJlc29sdmVDb21wb25lbnRGYWN0b3J5KGNvbmZpZy5yZXN1bHRzT3ZlcmxheUNvbXBvbmVudCk7XG5cdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRcdGlmICghdGhpcy5yZXN1bHRzT3ZlcmxheUNvbXBvbmVudEluc3RhbmNlKSB7XG5cdFx0XHRcdFx0XHRjb25zdCByZXN1bHRzT3ZlcmxheUNvbXBvbmVudEluc3RhbmNlID0gdGhpcy52Y3I/LmNyZWF0ZUNvbXBvbmVudChmYWN0b3J5KTtcblx0XHRcdFx0XHRcdGlmIChyZXN1bHRzT3ZlcmxheUNvbXBvbmVudEluc3RhbmNlKSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucmVzdWx0c092ZXJsYXlDb21wb25lbnRJbnN0YW5jZSA9IHJlc3VsdHNPdmVybGF5Q29tcG9uZW50SW5zdGFuY2U7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LCAxMDApO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLmhhc092ZXJsYXkgPSBmYWxzZTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogUmVtb3ZlcyB0aGUgZm9jdXMgb2YgdGhlIGN1cnJlbnRseSBmb2N1c2VkIG1hdGNoXG5cdCAqL1xuXHRjbGVhckZvY3VzZWRNYXRjaCgpIHtcblx0XHR0aGlzLmhpZ2hsaWdodFNlcnZpY2Uuc2V0T3JpZ2luYWxUZXh0TWF0Y2gobnVsbCk7XG5cdFx0dGhpcy5oaWdobGlnaHRTZXJ2aWNlLnNldE9yaWdpbmFsSHRtbE1hdGNoKG51bGwpO1xuXG5cdFx0dGhpcy5hbm5vdW5jZXIuYW5ub3VuY2UoJ0NsZWFyZWQgZm9jdXNlZCcsICdhc3NlcnRpdmUnKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBMaWZlLWN5Y2xlIG1ldGhvZFxuXHQgKiBlbXB0eSBmb3IgYHVudGlsRGVzdHJveWAgcnhqcyBvcGVyYXRvclxuXHQgKi9cblx0bmdPbkRlc3Ryb3koKSB7fVxufVxuIiwiPGNyLXBhbmVsPlxuXHQ8Y3ItcGFuZWwtaGVhZGVyPlxuXHRcdDwhLS0gIC0tPlxuXHRcdDxjbHMtc3Bpbm5lclxuXHRcdFx0c3R5bGU9XCJtYXJnaW4tcmlnaHQ6IDhweFwiXG5cdFx0XHR0aXRsZT1cIlNwaW5uZXJcIlxuXHRcdFx0Km5nSWY9XCJwcmV2aWV3cz8ubGVuZ3RoICYmIGlzTG9hZGluZ1Jlc3VsdHNcIlxuXHRcdFx0d2lkdGg9XCIyMHB4XCI+PC9jbHMtc3Bpbm5lcj5cblx0XHQ8IS0tICAtLT5cblx0XHR7eyB0cmFuc2xhdGlvbnM/LlJFU1VMVFNfU0VDVElPTj8uVElUTEUgfHwgJ1Jlc3VsdHMnIH19XG5cdFx0PG5nLWNvbnRhaW5lciAqbmdJZj1cImZvY3VzZWRNYXRjaFwiPlxuXHRcdFx0KHt7IHZpc2libGVSZXN1bHRzLmxlbmd0aCB9fSB7eyB0cmFuc2xhdGlvbnM/LlNIQVJFRD8uT0YgfHwgJ29mJyB9fSB7eyBwcmV2aWV3cz8ubGVuZ3RoIH19KVxuXHRcdDwvbmctY29udGFpbmVyPlxuXHRcdDwhLS0gIC0tPlxuXHQ8L2NyLXBhbmVsLWhlYWRlcj5cblx0PGNyLXBhbmVsLWFjdGlvbnM+XG5cdFx0PGNyLXBhbmVsLWFjdGlvbiAqbmdJZj1cImZvY3VzZWRNYXRjaFwiPlxuXHRcdFx0PG5nLWNvbnRhaW5lciAqbmdUZW1wbGF0ZU91dGxldD1cIm1lbnVfX3Nob3dfcmVzdWx0c1wiPjwvbmctY29udGFpbmVyPlxuXHRcdDwvY3ItcGFuZWwtYWN0aW9uPlxuXHRcdDxjci1wYW5lbC1hY3Rpb24gKm5nSWY9XCJpc01vYmlsZVwiPlxuXHRcdFx0PGJ1dHRvbiBtYXQtYnV0dG9uIFtkaXNhYmxlZF09XCIhcHJldmlld3NcIiAoY2xpY2spPVwiaXNBY3RpdmUgPSAhaXNBY3RpdmVcIiBhcmlhLWxhYmVsPVwiZXhwZW5kIGFjdGlvbnNcIj5cblx0XHRcdFx0PG1hdC1pY29uIFtzdmdJY29uXT1cImlzQWN0aXZlID8gJ2Fycm93X2Rvd253YXJkJyA6ICdhcnJvd191cHdhcmQnXCI+PC9tYXQtaWNvbj5cblx0XHRcdDwvYnV0dG9uPlxuXHRcdDwvY3ItcGFuZWwtYWN0aW9uPlxuXHRcdDxjci1wYW5lbC1hY3Rpb24gKm5nSWY9XCIhaXNNb2JpbGUgfHwgaXNBY3RpdmVcIj5cblx0XHRcdDxkaXYgaWQ9XCJjci1oaW50LXJlc3VsdHMtZmlsdGVyLWxpc3RcIj48L2Rpdj5cblx0XHRcdDxidXR0b25cblx0XHRcdFx0dGl0bGU9XCJGaWx0ZXIgcmVzdWx0c1wiXG5cdFx0XHRcdHRhYmluZGV4PVwiMFwiXG5cdFx0XHRcdHJvbGU9XCJidXR0b25cIlxuXHRcdFx0XHRtYXQtYnV0dG9uXG5cdFx0XHRcdFtuZ0NsYXNzXT1cInsgJ21hdC1zdHJva2VkLWJ1dHRvbiBtYXQtd2Fybic6IGhpZGRlblJlc3VsdHMubGVuZ3RoIH1cIlxuXHRcdFx0XHRbZGlzYWJsZWRdPVwiIXByZXZpZXdzIHx8IGhhc092ZXJsYXlcIlxuXHRcdFx0XHRbbWF0VG9vbHRpcF09XCJcblx0XHRcdFx0XHRoaWRkZW5SZXN1bHRzLmxlbmd0aFxuXHRcdFx0XHRcdFx0PyBoaWRkZW5SZXN1bHRzLmxlbmd0aCArICh0cmFuc2xhdGlvbnM/LlJFU1VMVFNfU0VDVElPTj8uRklMVEVSRURfUkVTVUxUU19UT09MVElQIHx8ICcgcmVzdWx0cyBhcmUgaGlkZGVuJylcblx0XHRcdFx0XHRcdDogdHJhbnNsYXRpb25zPy5SRVNVTFRTX1NFQ1RJT04/LkZJTFRFUl9UT09MVElQIHx8ICdGaWx0ZXIgcmVzdWx0cydcblx0XHRcdFx0XCJcblx0XHRcdFx0KGNsaWNrKT1cIm9wZW5GaWx0ZXJEaWFsb2coKVwiXG5cdFx0XHRcdGFyaWEtbGFiZWw9XCJPcGVucyBhIGRpYWxvZyB0byBmaWx0ZXIgb3V0IHJlc3VsdHMgZnJvbSByZXBvcnQuXCI+XG5cdFx0XHRcdDxtYXQtaWNvbiBbc3ZnSWNvbl09XCJoaWRkZW5SZXN1bHRzLmxlbmd0aCA/ICdmaWx0ZXJfbGlzdF9jb2xvcl9yZWQnIDogJ2ZpbHRlcl9saXN0J1wiPjwvbWF0LWljb24+XG5cdFx0XHQ8L2J1dHRvbj5cblx0XHQ8L2NyLXBhbmVsLWFjdGlvbj5cblx0PC9jci1wYW5lbC1hY3Rpb25zPlxuXHQ8Y3ItcGFuZWwtYm9keSBmeExheW91dD1cImNvbHVtblwiIGZ4RmxleD1cIjEwMFwiPlxuXHRcdDxkaXYgaWQ9XCJjci1oaW50LXJlc3VsdHMtY2FyZFwiPjwvZGl2PlxuXHRcdDxuZy1jb250YWluZXIgKm5nSWY9XCJoYXNPdmVybGF5XCI+XG5cdFx0XHQ8ZGl2IGNsYXNzPVwib3ZlcmxheS1jb21wb25lbnQtd3JhcHBlclwiPlxuXHRcdFx0XHQ8bmctY29udGFpbmVyICN2Y3I+PC9uZy1jb250YWluZXI+XG5cdFx0XHQ8L2Rpdj5cblx0XHQ8L25nLWNvbnRhaW5lcj5cblx0XHQ8Y3ItcGxhZ2lhcmlzbS1mcmVlXG5cdFx0XHQqbmdJZj1cInByZXZpZXdzICYmIHByZXZpZXdzLmxlbmd0aCA9PT0gMFwiXG5cdFx0XHRbbmdDbGFzc109XCJoYXNPdmVybGF5ID8gJ2JsdXInIDogJydcIj48L2NyLXBsYWdpYXJpc20tZnJlZT5cblx0XHQ8dmlydHVhbC1zY3JvbGxlclxuXHRcdFx0Km5nSWY9XCJwcmV2aWV3c1wiXG5cdFx0XHRbbmdDbGFzc109XCJoYXNPdmVybGF5ID8gJ2JsdXInIDogJydcIlxuXHRcdFx0W2J1ZmZlckFtb3VudF09XCI3XCJcblx0XHRcdCNzY3JvbGxcblx0XHRcdGZ4RmxleFxuXHRcdFx0W2l0ZW1zXT1cInByZXZpZXdzIHwgd2hpdGVsaXN0IDogJ2lkJyA6IGZvY3VzZWRNYXRjaD8uaWRzXCI+XG5cdFx0XHQ8Y3ItcmVzdWx0LWNhcmQgKm5nRm9yPVwibGV0IHByZXZpZXcgb2Ygc2Nyb2xsLnZpZXdQb3J0SXRlbXNcIiBbcHJldmlld109XCJwcmV2aWV3XCI+PC9jci1yZXN1bHQtY2FyZD5cblx0XHQ8L3ZpcnR1YWwtc2Nyb2xsZXI+XG5cdFx0PHZpcnR1YWwtc2Nyb2xsZXIgKm5nSWY9XCIhcHJldmlld3NcIiBbbmdDbGFzc109XCJoYXNPdmVybGF5ID8gJ2JsdXInIDogJydcIiAjc2Nyb2xsIGZ4RmxleCBbaXRlbXNdPVwiWzEsIDIsIDMsIDRdXCI+XG5cdFx0XHQ8Y3ItcmVzdWx0LWNhcmQgKm5nRm9yPVwibGV0IHByZXZpZXcgb2Ygc2Nyb2xsLnZpZXdQb3J0SXRlbXNcIj48L2NyLXJlc3VsdC1jYXJkPlxuXHRcdDwvdmlydHVhbC1zY3JvbGxlcj5cblx0XHQ8ZGl2IGNsYXNzPVwicG93ZXJlZC1ieS1zZWN0aW9uXCI+XG5cdFx0XHQ8Y3ItcG93ZXJlZC1ieT48L2NyLXBvd2VyZWQtYnk+XG5cdFx0PC9kaXY+XG5cdDwvY3ItcGFuZWwtYm9keT5cbjwvY3ItcGFuZWw+XG48bmctdGVtcGxhdGUgI21lbnVfX3Nob3dfcmVzdWx0cz5cblx0PGJ1dHRvblxuXHRcdGFyaWEtbGFiZWw9XCJDbGVhciBmb2N1c2VkIHJlc3VsdHNcIlxuXHRcdFt0aXRsZV09XCJ0cmFuc2xhdGlvbnM/LlJFU1VMVFNfU0VDVElPTj8uQ0xFQVJfRklMVEVSIHx8ICdDbGVhciBmb2N1c2VkJ1wiXG5cdFx0bWF0LWJ1dHRvblxuXHRcdChjbGljayk9XCJjbGVhckZvY3VzZWRNYXRjaCgpXCJcblx0XHRbbWF0VG9vbHRpcF09XCJ0cmFuc2xhdGlvbnM/LlJFU1VMVFNfU0VDVElPTj8uQ0xFQVJfRklMVEVSIHx8ICdDbGVhciBmb2N1c2VkJ1wiPlxuXHRcdDxtYXQtaWNvbj5jbG9zZTwvbWF0LWljb24+XG5cdDwvYnV0dG9uPlxuPC9uZy10ZW1wbGF0ZT5cblxuPG5nLXRlbXBsYXRlICNza2VsZXRvbl9fZmFrZXM+XG5cdDxjci1yZXN1bHQtY2FyZD48L2NyLXJlc3VsdC1jYXJkPlxuXHQ8Y3ItcmVzdWx0LWNhcmQ+PC9jci1yZXN1bHQtY2FyZD5cblx0PGNyLXJlc3VsdC1jYXJkPjwvY3ItcmVzdWx0LWNhcmQ+XG48L25nLXRlbXBsYXRlPlxuIl19
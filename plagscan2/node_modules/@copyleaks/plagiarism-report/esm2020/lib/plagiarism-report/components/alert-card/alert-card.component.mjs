import { Component, EventEmitter, Input, Output } from '@angular/core';
import { filter, take } from 'rxjs/operators';
import { untilDestroy } from '../../../shared/operators/untilDestroy';
import { CompleteResultNotificationAlertSeverity, MatchType } from '../../models';
import { EReportViewModel } from '../../services/view-mode.service';
import { ALERTS } from '../../utils/constants';
import * as i0 from "@angular/core";
import * as i1 from "../../services/view-mode.service";
import * as i2 from "../../services/highlight.service";
import * as i3 from "../../services/report.service";
import * as i4 from "../../services/match.service";
import * as i5 from "@angular/material/icon";
import * as i6 from "@angular/material/button";
import * as i7 from "@angular/flex-layout/flex";
import * as i8 from "@angular/common";
import * as i9 from "@angular/flex-layout/extended";
export class AlertCardComponent {
    constructor(viewModeService, highlightService, reportService, matchsService) {
        this.viewModeService = viewModeService;
        this.highlightService = highlightService;
        this.reportService = reportService;
        this.matchsService = matchsService;
        this.afterToggleError = new EventEmitter();
        this.severity = CompleteResultNotificationAlertSeverity;
        this.alertsConstants = ALERTS;
    }
    get isSelected() {
        return this.viewModeService?.selectedAlert?.code === this.alert?.code;
    }
    /**
     * this function will select an alert
     */
    toggleAlertPreview(alert) {
        if (this.isSelected) {
            this.viewModeService.selectedAlert = null;
        }
        else {
            this.viewModeService.selectedAlert = alert;
        }
        this.reportService.configure({ contentMode: 'text' });
        setTimeout(() => {
            this.viewModeService.changeViewMode$(EReportViewModel.Alerts);
            this.matchsService.originalTextMatches$
                .pipe(untilDestroy(this), take(1), filter(m => m.filter(mat => mat.filter(match => match.match.type !== MatchType.none).length !== 0).length !== 0))
                .subscribe(_ => {
                this.highlightService.jump(true);
            });
            if (this.afterToggleError) {
                this.afterToggleError.emit();
            }
        }, 100);
    }
    /**
     * life cycel method
     * required for untilDestored
     */
    ngOnDestroy() { }
}
AlertCardComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.3.3", ngImport: i0, type: AlertCardComponent, deps: [{ token: i1.ViewModeService }, { token: i2.HighlightService }, { token: i3.ReportService }, { token: i4.MatchService }], target: i0.ɵɵFactoryTarget.Component });
AlertCardComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "13.3.3", type: AlertCardComponent, selector: "cr-alert-card", inputs: { alert: "alert" }, outputs: { afterToggleError: "afterToggleError" }, ngImport: i0, template: "<div\n\tclass=\"alert-card\"\n\t[style.padding-bottom]=\"!alert?.helpLink ? '16px' : ''\"\n\tfxLayout=\"column\"\n\t[ngClass]=\"{\n\t\t'alert-card-error': alert.severity === severity.High || alert.severity === severity.VeryHigh,\n\t\t'alert-card-warning': alert.severity === severity.Medium\n\t}\"\n\tfxLayoutGap=\"10px\">\n\t<div fxLayout=\"row\" class=\"alert-card-header\" fxLayoutAlign=\"start center\" fxLayoutGap=\"10px\">\n\t\t<ng-container [ngSwitch]=\"alert.severity\">\n\t\t\t<mat-icon *ngSwitchCase=\"severity.Medium\">warning</mat-icon>\n\t\t\t<mat-icon *ngSwitchCase=\"severity.High\">error</mat-icon>\n\t\t\t<mat-icon *ngSwitchCase=\"severity.VeryHigh\">error</mat-icon>\n\t\t\t<mat-icon *ngSwitchDefault>info</mat-icon>\n\t\t</ng-container>\n\t\t<div>\n\t\t\t<div class=\"card-header-title\">{{ alert.title }}</div>\n\t\t\t<ng-container [ngSwitch]=\"alert.severity\">\n\t\t\t\t<p class=\"card-header-description\" *ngSwitchCase=\"severity.VeryLow\">Very Low</p>\n\t\t\t\t<p class=\"card-header-description\" *ngSwitchCase=\"severity.Low\">Low</p>\n\t\t\t\t<p class=\"card-header-description\" *ngSwitchCase=\"severity.Medium\">Medium</p>\n\t\t\t\t<p class=\"card-header-description\" *ngSwitchCase=\"severity.High\">High</p>\n\t\t\t\t<p class=\"card-header-description\" *ngSwitchCase=\"severity.VeryHigh\">Very High</p>\n\t\t\t</ng-container>\n\t\t</div>\n\t</div>\n\n\t<div style=\"text-align: justify\">\n\t\t{{ alert.message }}\n\t</div>\n\n\t<div\n\t\tclass=\"actions\"\n\t\t*ngIf=\"\n\t\t\talert.helpLink ||\n\t\t\talert.code == alertsConstants.SUSPECTED_CHARACTER_REPLACEMENT_CODE ||\n\t\t\talert.code == alertsConstants.SUSPECTED_AI_TEXT_DETECTED\n\t\t\">\n\t\t<ng-container\n\t\t\t*ngIf=\"\n\t\t\t\talert.code == alertsConstants.SUSPECTED_CHARACTER_REPLACEMENT_CODE ||\n\t\t\t\talert.code == alertsConstants.SUSPECTED_AI_TEXT_DETECTED\n\t\t\t\">\n\t\t\t<button mat-stroked-button *ngIf=\"!isSelected\" style=\"font-weight: bolder\" (click)=\"toggleAlertPreview(alert)\">\n\t\t\t\t<mat-icon>visibility</mat-icon>\n\t\t\t\tPreview\n\t\t\t</button>\n\t\t\t<button mat-raised-button *ngIf=\"isSelected\" color=\"primary\" (click)=\"toggleAlertPreview(alert)\">\n\t\t\t\t<mat-icon>visibility_off</mat-icon>\n\t\t\t\tStop preview\n\t\t\t</button>\n\t\t</ng-container>\n\n\t\t<a mat-stroked-button target=\"_blank\" *ngIf=\"alert.helpLink\" [href]=\"alert.helpLink\">Learn more</a>\n\t</div>\n</div>\n", styles: [".alert-card{padding:16px 16px 6px;border-top:3px solid #17a1ff;box-shadow:0 1px 2px #0000004f}.alert-card .alert-card-header mat-icon{color:#17a1ff;font-size:45px;width:45px;height:45px;line-height:45px}.alert-card .alert-card-header .card-header-title{margin-bottom:5px;font-size:17px;font-weight:700;color:#000000de}.alert-card .alert-card-header .card-header-description{font-size:14px;color:#0000008a;margin:0}.alert-card-error{border-color:red!important}.alert-card-error .alert-card-header mat-icon{color:red!important}.alert-card-warning{border-color:orange!important}.alert-card-warning .alert-card-header mat-icon{color:orange!important}.actions{display:flex;justify-content:flex-end;gap:10px}.actions a{padding:0 10px;font-weight:700;font-size:14px}\n"], components: [{ type: i5.MatIcon, selector: "mat-icon", inputs: ["color", "inline", "svgIcon", "fontSet", "fontIcon"], exportAs: ["matIcon"] }, { type: i6.MatButton, selector: "button[mat-button], button[mat-raised-button], button[mat-icon-button],             button[mat-fab], button[mat-mini-fab], button[mat-stroked-button],             button[mat-flat-button]", inputs: ["disabled", "disableRipple", "color"], exportAs: ["matButton"] }, { type: i6.MatAnchor, selector: "a[mat-button], a[mat-raised-button], a[mat-icon-button], a[mat-fab],             a[mat-mini-fab], a[mat-stroked-button], a[mat-flat-button]", inputs: ["disabled", "disableRipple", "color", "tabIndex"], exportAs: ["matButton", "matAnchor"] }], directives: [{ type: i7.DefaultLayoutDirective, selector: "  [fxLayout], [fxLayout.xs], [fxLayout.sm], [fxLayout.md],  [fxLayout.lg], [fxLayout.xl], [fxLayout.lt-sm], [fxLayout.lt-md],  [fxLayout.lt-lg], [fxLayout.lt-xl], [fxLayout.gt-xs], [fxLayout.gt-sm],  [fxLayout.gt-md], [fxLayout.gt-lg]", inputs: ["fxLayout", "fxLayout.xs", "fxLayout.sm", "fxLayout.md", "fxLayout.lg", "fxLayout.xl", "fxLayout.lt-sm", "fxLayout.lt-md", "fxLayout.lt-lg", "fxLayout.lt-xl", "fxLayout.gt-xs", "fxLayout.gt-sm", "fxLayout.gt-md", "fxLayout.gt-lg"] }, { type: i7.DefaultLayoutGapDirective, selector: "  [fxLayoutGap], [fxLayoutGap.xs], [fxLayoutGap.sm], [fxLayoutGap.md],  [fxLayoutGap.lg], [fxLayoutGap.xl], [fxLayoutGap.lt-sm], [fxLayoutGap.lt-md],  [fxLayoutGap.lt-lg], [fxLayoutGap.lt-xl], [fxLayoutGap.gt-xs], [fxLayoutGap.gt-sm],  [fxLayoutGap.gt-md], [fxLayoutGap.gt-lg]", inputs: ["fxLayoutGap", "fxLayoutGap.xs", "fxLayoutGap.sm", "fxLayoutGap.md", "fxLayoutGap.lg", "fxLayoutGap.xl", "fxLayoutGap.lt-sm", "fxLayoutGap.lt-md", "fxLayoutGap.lt-lg", "fxLayoutGap.lt-xl", "fxLayoutGap.gt-xs", "fxLayoutGap.gt-sm", "fxLayoutGap.gt-md", "fxLayoutGap.gt-lg"] }, { type: i8.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { type: i9.DefaultClassDirective, selector: "  [ngClass], [ngClass.xs], [ngClass.sm], [ngClass.md], [ngClass.lg], [ngClass.xl],  [ngClass.lt-sm], [ngClass.lt-md], [ngClass.lt-lg], [ngClass.lt-xl],  [ngClass.gt-xs], [ngClass.gt-sm], [ngClass.gt-md], [ngClass.gt-lg]", inputs: ["ngClass", "ngClass.xs", "ngClass.sm", "ngClass.md", "ngClass.lg", "ngClass.xl", "ngClass.lt-sm", "ngClass.lt-md", "ngClass.lt-lg", "ngClass.lt-xl", "ngClass.gt-xs", "ngClass.gt-sm", "ngClass.gt-md", "ngClass.gt-lg"] }, { type: i7.DefaultLayoutAlignDirective, selector: "  [fxLayoutAlign], [fxLayoutAlign.xs], [fxLayoutAlign.sm], [fxLayoutAlign.md],  [fxLayoutAlign.lg], [fxLayoutAlign.xl], [fxLayoutAlign.lt-sm], [fxLayoutAlign.lt-md],  [fxLayoutAlign.lt-lg], [fxLayoutAlign.lt-xl], [fxLayoutAlign.gt-xs], [fxLayoutAlign.gt-sm],  [fxLayoutAlign.gt-md], [fxLayoutAlign.gt-lg]", inputs: ["fxLayoutAlign", "fxLayoutAlign.xs", "fxLayoutAlign.sm", "fxLayoutAlign.md", "fxLayoutAlign.lg", "fxLayoutAlign.xl", "fxLayoutAlign.lt-sm", "fxLayoutAlign.lt-md", "fxLayoutAlign.lt-lg", "fxLayoutAlign.lt-xl", "fxLayoutAlign.gt-xs", "fxLayoutAlign.gt-sm", "fxLayoutAlign.gt-md", "fxLayoutAlign.gt-lg"] }, { type: i8.NgSwitch, selector: "[ngSwitch]", inputs: ["ngSwitch"] }, { type: i8.NgSwitchCase, selector: "[ngSwitchCase]", inputs: ["ngSwitchCase"] }, { type: i8.NgSwitchDefault, selector: "[ngSwitchDefault]" }, { type: i8.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.3.3", ngImport: i0, type: AlertCardComponent, decorators: [{
            type: Component,
            args: [{ selector: 'cr-alert-card', template: "<div\n\tclass=\"alert-card\"\n\t[style.padding-bottom]=\"!alert?.helpLink ? '16px' : ''\"\n\tfxLayout=\"column\"\n\t[ngClass]=\"{\n\t\t'alert-card-error': alert.severity === severity.High || alert.severity === severity.VeryHigh,\n\t\t'alert-card-warning': alert.severity === severity.Medium\n\t}\"\n\tfxLayoutGap=\"10px\">\n\t<div fxLayout=\"row\" class=\"alert-card-header\" fxLayoutAlign=\"start center\" fxLayoutGap=\"10px\">\n\t\t<ng-container [ngSwitch]=\"alert.severity\">\n\t\t\t<mat-icon *ngSwitchCase=\"severity.Medium\">warning</mat-icon>\n\t\t\t<mat-icon *ngSwitchCase=\"severity.High\">error</mat-icon>\n\t\t\t<mat-icon *ngSwitchCase=\"severity.VeryHigh\">error</mat-icon>\n\t\t\t<mat-icon *ngSwitchDefault>info</mat-icon>\n\t\t</ng-container>\n\t\t<div>\n\t\t\t<div class=\"card-header-title\">{{ alert.title }}</div>\n\t\t\t<ng-container [ngSwitch]=\"alert.severity\">\n\t\t\t\t<p class=\"card-header-description\" *ngSwitchCase=\"severity.VeryLow\">Very Low</p>\n\t\t\t\t<p class=\"card-header-description\" *ngSwitchCase=\"severity.Low\">Low</p>\n\t\t\t\t<p class=\"card-header-description\" *ngSwitchCase=\"severity.Medium\">Medium</p>\n\t\t\t\t<p class=\"card-header-description\" *ngSwitchCase=\"severity.High\">High</p>\n\t\t\t\t<p class=\"card-header-description\" *ngSwitchCase=\"severity.VeryHigh\">Very High</p>\n\t\t\t</ng-container>\n\t\t</div>\n\t</div>\n\n\t<div style=\"text-align: justify\">\n\t\t{{ alert.message }}\n\t</div>\n\n\t<div\n\t\tclass=\"actions\"\n\t\t*ngIf=\"\n\t\t\talert.helpLink ||\n\t\t\talert.code == alertsConstants.SUSPECTED_CHARACTER_REPLACEMENT_CODE ||\n\t\t\talert.code == alertsConstants.SUSPECTED_AI_TEXT_DETECTED\n\t\t\">\n\t\t<ng-container\n\t\t\t*ngIf=\"\n\t\t\t\talert.code == alertsConstants.SUSPECTED_CHARACTER_REPLACEMENT_CODE ||\n\t\t\t\talert.code == alertsConstants.SUSPECTED_AI_TEXT_DETECTED\n\t\t\t\">\n\t\t\t<button mat-stroked-button *ngIf=\"!isSelected\" style=\"font-weight: bolder\" (click)=\"toggleAlertPreview(alert)\">\n\t\t\t\t<mat-icon>visibility</mat-icon>\n\t\t\t\tPreview\n\t\t\t</button>\n\t\t\t<button mat-raised-button *ngIf=\"isSelected\" color=\"primary\" (click)=\"toggleAlertPreview(alert)\">\n\t\t\t\t<mat-icon>visibility_off</mat-icon>\n\t\t\t\tStop preview\n\t\t\t</button>\n\t\t</ng-container>\n\n\t\t<a mat-stroked-button target=\"_blank\" *ngIf=\"alert.helpLink\" [href]=\"alert.helpLink\">Learn more</a>\n\t</div>\n</div>\n", styles: [".alert-card{padding:16px 16px 6px;border-top:3px solid #17a1ff;box-shadow:0 1px 2px #0000004f}.alert-card .alert-card-header mat-icon{color:#17a1ff;font-size:45px;width:45px;height:45px;line-height:45px}.alert-card .alert-card-header .card-header-title{margin-bottom:5px;font-size:17px;font-weight:700;color:#000000de}.alert-card .alert-card-header .card-header-description{font-size:14px;color:#0000008a;margin:0}.alert-card-error{border-color:red!important}.alert-card-error .alert-card-header mat-icon{color:red!important}.alert-card-warning{border-color:orange!important}.alert-card-warning .alert-card-header mat-icon{color:orange!important}.actions{display:flex;justify-content:flex-end;gap:10px}.actions a{padding:0 10px;font-weight:700;font-size:14px}\n"] }]
        }], ctorParameters: function () { return [{ type: i1.ViewModeService }, { type: i2.HighlightService }, { type: i3.ReportService }, { type: i4.MatchService }]; }, propDecorators: { alert: [{
                type: Input
            }], afterToggleError: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWxlcnQtY2FyZC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9wbGFnaWFyaXNtLXJlcG9ydC9zcmMvbGliL3BsYWdpYXJpc20tcmVwb3J0L2NvbXBvbmVudHMvYWxlcnQtY2FyZC9hbGVydC1jYXJkLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3BsYWdpYXJpc20tcmVwb3J0L3NyYy9saWIvcGxhZ2lhcmlzbS1yZXBvcnQvY29tcG9uZW50cy9hbGVydC1jYXJkL2FsZXJ0LWNhcmQuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFhLE1BQU0sRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNsRixPQUFPLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQzlDLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSx3Q0FBd0MsQ0FBQztBQUN0RSxPQUFPLEVBQW1DLHVDQUF1QyxFQUFFLFNBQVMsRUFBRSxNQUFNLGNBQWMsQ0FBQztBQUluSCxPQUFPLEVBQUUsZ0JBQWdCLEVBQW1CLE1BQU0sa0NBQWtDLENBQUM7QUFDckYsT0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFNLHVCQUF1QixDQUFDOzs7Ozs7Ozs7OztBQU8vQyxNQUFNLE9BQU8sa0JBQWtCO0lBUTlCLFlBQ1MsZUFBZ0MsRUFDaEMsZ0JBQWtDLEVBQ2xDLGFBQTRCLEVBQzVCLGFBQTJCO1FBSDNCLG9CQUFlLEdBQWYsZUFBZSxDQUFpQjtRQUNoQyxxQkFBZ0IsR0FBaEIsZ0JBQWdCLENBQWtCO1FBQ2xDLGtCQUFhLEdBQWIsYUFBYSxDQUFlO1FBQzVCLGtCQUFhLEdBQWIsYUFBYSxDQUFjO1FBVjFCLHFCQUFnQixHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7UUFDaEQsYUFBUSxHQUFHLHVDQUF1QyxDQUFDO1FBQ25ELG9CQUFlLEdBQUcsTUFBTSxDQUFDO0lBU3RCLENBQUM7SUFSSixJQUFJLFVBQVU7UUFDYixPQUFPLElBQUksQ0FBQyxlQUFlLEVBQUUsYUFBYSxFQUFFLElBQUksS0FBSyxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQztJQUN2RSxDQUFDO0lBT0Q7O09BRUc7SUFDSCxrQkFBa0IsQ0FBQyxLQUFzQztRQUN4RCxJQUFJLElBQUksQ0FBQyxVQUFVLEVBQUU7WUFDcEIsSUFBSSxDQUFDLGVBQWUsQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDO1NBQzFDO2FBQU07WUFDTixJQUFJLENBQUMsZUFBZSxDQUFDLGFBQWEsR0FBRyxLQUFLLENBQUM7U0FDM0M7UUFFRCxJQUFJLENBQUMsYUFBYSxDQUFDLFNBQVMsQ0FBQyxFQUFFLFdBQVcsRUFBRSxNQUFNLEVBQUUsQ0FBQyxDQUFDO1FBRXRELFVBQVUsQ0FBQyxHQUFHLEVBQUU7WUFDZixJQUFJLENBQUMsZUFBZSxDQUFDLGVBQWUsQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUU5RCxJQUFJLENBQUMsYUFBYSxDQUFDLG9CQUFvQjtpQkFDckMsSUFBSSxDQUNKLFlBQVksQ0FBQyxJQUFJLENBQUMsRUFDbEIsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUNQLE1BQU0sQ0FDTCxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxJQUFJLEtBQUssU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sS0FBSyxDQUFDLENBQUMsQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUN4RyxDQUNEO2lCQUNBLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRTtnQkFDZCxJQUFJLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ2xDLENBQUMsQ0FBQyxDQUFDO1lBRUosSUFBSSxJQUFJLENBQUMsZ0JBQWdCLEVBQUU7Z0JBQzFCLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLEVBQUUsQ0FBQzthQUM3QjtRQUNGLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztJQUNULENBQUM7SUFDRDs7O09BR0c7SUFDSCxXQUFXLEtBQUksQ0FBQzs7K0dBbERKLGtCQUFrQjttR0FBbEIsa0JBQWtCLG9JQ2YvQixvM0VBeURBOzJGRDFDYSxrQkFBa0I7a0JBTDlCLFNBQVM7K0JBQ0MsZUFBZTs0TEFLaEIsS0FBSztzQkFBYixLQUFLO2dCQUNJLGdCQUFnQjtzQkFBekIsTUFBTSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgRXZlbnRFbWl0dGVyLCBJbnB1dCwgT25EZXN0cm95LCBPdXRwdXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IGZpbHRlciwgdGFrZSB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IHVudGlsRGVzdHJveSB9IGZyb20gJy4uLy4uLy4uL3NoYXJlZC9vcGVyYXRvcnMvdW50aWxEZXN0cm95JztcbmltcG9ydCB7IENvbXBsZXRlUmVzdWx0Tm90aWZpY2F0aW9uQWxlcnQsIENvbXBsZXRlUmVzdWx0Tm90aWZpY2F0aW9uQWxlcnRTZXZlcml0eSwgTWF0Y2hUeXBlIH0gZnJvbSAnLi4vLi4vbW9kZWxzJztcbmltcG9ydCB7IEhpZ2hsaWdodFNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9oaWdobGlnaHQuc2VydmljZSc7XG5pbXBvcnQgeyBNYXRjaFNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9tYXRjaC5zZXJ2aWNlJztcbmltcG9ydCB7IFJlcG9ydFNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9yZXBvcnQuc2VydmljZSc7XG5pbXBvcnQgeyBFUmVwb3J0Vmlld01vZGVsLCBWaWV3TW9kZVNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy92aWV3LW1vZGUuc2VydmljZSc7XG5pbXBvcnQgeyBBTEVSVFMgfSBmcm9tICcuLi8uLi91dGlscy9jb25zdGFudHMnO1xuXG5AQ29tcG9uZW50KHtcblx0c2VsZWN0b3I6ICdjci1hbGVydC1jYXJkJyxcblx0dGVtcGxhdGVVcmw6ICcuL2FsZXJ0LWNhcmQuY29tcG9uZW50Lmh0bWwnLFxuXHRzdHlsZVVybHM6IFsnLi9hbGVydC1jYXJkLmNvbXBvbmVudC5zY3NzJ10sXG59KVxuZXhwb3J0IGNsYXNzIEFsZXJ0Q2FyZENvbXBvbmVudCBpbXBsZW1lbnRzIE9uRGVzdHJveSB7XG5cdEBJbnB1dCgpIGFsZXJ0OiBDb21wbGV0ZVJlc3VsdE5vdGlmaWNhdGlvbkFsZXJ0O1xuXHRAT3V0cHV0KCkgYWZ0ZXJUb2dnbGVFcnJvciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblx0c2V2ZXJpdHkgPSBDb21wbGV0ZVJlc3VsdE5vdGlmaWNhdGlvbkFsZXJ0U2V2ZXJpdHk7XG5cdGFsZXJ0c0NvbnN0YW50cyA9IEFMRVJUUztcblx0Z2V0IGlzU2VsZWN0ZWQoKSB7XG5cdFx0cmV0dXJuIHRoaXMudmlld01vZGVTZXJ2aWNlPy5zZWxlY3RlZEFsZXJ0Py5jb2RlID09PSB0aGlzLmFsZXJ0Py5jb2RlO1xuXHR9XG5cdGNvbnN0cnVjdG9yKFxuXHRcdHByaXZhdGUgdmlld01vZGVTZXJ2aWNlOiBWaWV3TW9kZVNlcnZpY2UsXG5cdFx0cHJpdmF0ZSBoaWdobGlnaHRTZXJ2aWNlOiBIaWdobGlnaHRTZXJ2aWNlLFxuXHRcdHByaXZhdGUgcmVwb3J0U2VydmljZTogUmVwb3J0U2VydmljZSxcblx0XHRwcml2YXRlIG1hdGNoc1NlcnZpY2U6IE1hdGNoU2VydmljZVxuXHQpIHt9XG5cdC8qKlxuXHQgKiB0aGlzIGZ1bmN0aW9uIHdpbGwgc2VsZWN0IGFuIGFsZXJ0XG5cdCAqL1xuXHR0b2dnbGVBbGVydFByZXZpZXcoYWxlcnQ6IENvbXBsZXRlUmVzdWx0Tm90aWZpY2F0aW9uQWxlcnQpIHtcblx0XHRpZiAodGhpcy5pc1NlbGVjdGVkKSB7XG5cdFx0XHR0aGlzLnZpZXdNb2RlU2VydmljZS5zZWxlY3RlZEFsZXJ0ID0gbnVsbDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy52aWV3TW9kZVNlcnZpY2Uuc2VsZWN0ZWRBbGVydCA9IGFsZXJ0O1xuXHRcdH1cblxuXHRcdHRoaXMucmVwb3J0U2VydmljZS5jb25maWd1cmUoeyBjb250ZW50TW9kZTogJ3RleHQnIH0pO1xuXG5cdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHR0aGlzLnZpZXdNb2RlU2VydmljZS5jaGFuZ2VWaWV3TW9kZSQoRVJlcG9ydFZpZXdNb2RlbC5BbGVydHMpO1xuXG5cdFx0XHR0aGlzLm1hdGNoc1NlcnZpY2Uub3JpZ2luYWxUZXh0TWF0Y2hlcyRcblx0XHRcdFx0LnBpcGUoXG5cdFx0XHRcdFx0dW50aWxEZXN0cm95KHRoaXMpLFxuXHRcdFx0XHRcdHRha2UoMSksXG5cdFx0XHRcdFx0ZmlsdGVyKFxuXHRcdFx0XHRcdFx0bSA9PiBtLmZpbHRlcihtYXQgPT4gbWF0LmZpbHRlcihtYXRjaCA9PiBtYXRjaC5tYXRjaC50eXBlICE9PSBNYXRjaFR5cGUubm9uZSkubGVuZ3RoICE9PSAwKS5sZW5ndGggIT09IDBcblx0XHRcdFx0XHQpXG5cdFx0XHRcdClcblx0XHRcdFx0LnN1YnNjcmliZShfID0+IHtcblx0XHRcdFx0XHR0aGlzLmhpZ2hsaWdodFNlcnZpY2UuanVtcCh0cnVlKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdGlmICh0aGlzLmFmdGVyVG9nZ2xlRXJyb3IpIHtcblx0XHRcdFx0dGhpcy5hZnRlclRvZ2dsZUVycm9yLmVtaXQoKTtcblx0XHRcdH1cblx0XHR9LCAxMDApO1xuXHR9XG5cdC8qKlxuXHQgKiBsaWZlIGN5Y2VsIG1ldGhvZFxuXHQgKiByZXF1aXJlZCBmb3IgdW50aWxEZXN0b3JlZFxuXHQgKi9cblx0bmdPbkRlc3Ryb3koKSB7fVxufVxuIiwiPGRpdlxuXHRjbGFzcz1cImFsZXJ0LWNhcmRcIlxuXHRbc3R5bGUucGFkZGluZy1ib3R0b21dPVwiIWFsZXJ0Py5oZWxwTGluayA/ICcxNnB4JyA6ICcnXCJcblx0ZnhMYXlvdXQ9XCJjb2x1bW5cIlxuXHRbbmdDbGFzc109XCJ7XG5cdFx0J2FsZXJ0LWNhcmQtZXJyb3InOiBhbGVydC5zZXZlcml0eSA9PT0gc2V2ZXJpdHkuSGlnaCB8fCBhbGVydC5zZXZlcml0eSA9PT0gc2V2ZXJpdHkuVmVyeUhpZ2gsXG5cdFx0J2FsZXJ0LWNhcmQtd2FybmluZyc6IGFsZXJ0LnNldmVyaXR5ID09PSBzZXZlcml0eS5NZWRpdW1cblx0fVwiXG5cdGZ4TGF5b3V0R2FwPVwiMTBweFwiPlxuXHQ8ZGl2IGZ4TGF5b3V0PVwicm93XCIgY2xhc3M9XCJhbGVydC1jYXJkLWhlYWRlclwiIGZ4TGF5b3V0QWxpZ249XCJzdGFydCBjZW50ZXJcIiBmeExheW91dEdhcD1cIjEwcHhcIj5cblx0XHQ8bmctY29udGFpbmVyIFtuZ1N3aXRjaF09XCJhbGVydC5zZXZlcml0eVwiPlxuXHRcdFx0PG1hdC1pY29uICpuZ1N3aXRjaENhc2U9XCJzZXZlcml0eS5NZWRpdW1cIj53YXJuaW5nPC9tYXQtaWNvbj5cblx0XHRcdDxtYXQtaWNvbiAqbmdTd2l0Y2hDYXNlPVwic2V2ZXJpdHkuSGlnaFwiPmVycm9yPC9tYXQtaWNvbj5cblx0XHRcdDxtYXQtaWNvbiAqbmdTd2l0Y2hDYXNlPVwic2V2ZXJpdHkuVmVyeUhpZ2hcIj5lcnJvcjwvbWF0LWljb24+XG5cdFx0XHQ8bWF0LWljb24gKm5nU3dpdGNoRGVmYXVsdD5pbmZvPC9tYXQtaWNvbj5cblx0XHQ8L25nLWNvbnRhaW5lcj5cblx0XHQ8ZGl2PlxuXHRcdFx0PGRpdiBjbGFzcz1cImNhcmQtaGVhZGVyLXRpdGxlXCI+e3sgYWxlcnQudGl0bGUgfX08L2Rpdj5cblx0XHRcdDxuZy1jb250YWluZXIgW25nU3dpdGNoXT1cImFsZXJ0LnNldmVyaXR5XCI+XG5cdFx0XHRcdDxwIGNsYXNzPVwiY2FyZC1oZWFkZXItZGVzY3JpcHRpb25cIiAqbmdTd2l0Y2hDYXNlPVwic2V2ZXJpdHkuVmVyeUxvd1wiPlZlcnkgTG93PC9wPlxuXHRcdFx0XHQ8cCBjbGFzcz1cImNhcmQtaGVhZGVyLWRlc2NyaXB0aW9uXCIgKm5nU3dpdGNoQ2FzZT1cInNldmVyaXR5Lkxvd1wiPkxvdzwvcD5cblx0XHRcdFx0PHAgY2xhc3M9XCJjYXJkLWhlYWRlci1kZXNjcmlwdGlvblwiICpuZ1N3aXRjaENhc2U9XCJzZXZlcml0eS5NZWRpdW1cIj5NZWRpdW08L3A+XG5cdFx0XHRcdDxwIGNsYXNzPVwiY2FyZC1oZWFkZXItZGVzY3JpcHRpb25cIiAqbmdTd2l0Y2hDYXNlPVwic2V2ZXJpdHkuSGlnaFwiPkhpZ2g8L3A+XG5cdFx0XHRcdDxwIGNsYXNzPVwiY2FyZC1oZWFkZXItZGVzY3JpcHRpb25cIiAqbmdTd2l0Y2hDYXNlPVwic2V2ZXJpdHkuVmVyeUhpZ2hcIj5WZXJ5IEhpZ2g8L3A+XG5cdFx0XHQ8L25nLWNvbnRhaW5lcj5cblx0XHQ8L2Rpdj5cblx0PC9kaXY+XG5cblx0PGRpdiBzdHlsZT1cInRleHQtYWxpZ246IGp1c3RpZnlcIj5cblx0XHR7eyBhbGVydC5tZXNzYWdlIH19XG5cdDwvZGl2PlxuXG5cdDxkaXZcblx0XHRjbGFzcz1cImFjdGlvbnNcIlxuXHRcdCpuZ0lmPVwiXG5cdFx0XHRhbGVydC5oZWxwTGluayB8fFxuXHRcdFx0YWxlcnQuY29kZSA9PSBhbGVydHNDb25zdGFudHMuU1VTUEVDVEVEX0NIQVJBQ1RFUl9SRVBMQUNFTUVOVF9DT0RFIHx8XG5cdFx0XHRhbGVydC5jb2RlID09IGFsZXJ0c0NvbnN0YW50cy5TVVNQRUNURURfQUlfVEVYVF9ERVRFQ1RFRFxuXHRcdFwiPlxuXHRcdDxuZy1jb250YWluZXJcblx0XHRcdCpuZ0lmPVwiXG5cdFx0XHRcdGFsZXJ0LmNvZGUgPT0gYWxlcnRzQ29uc3RhbnRzLlNVU1BFQ1RFRF9DSEFSQUNURVJfUkVQTEFDRU1FTlRfQ09ERSB8fFxuXHRcdFx0XHRhbGVydC5jb2RlID09IGFsZXJ0c0NvbnN0YW50cy5TVVNQRUNURURfQUlfVEVYVF9ERVRFQ1RFRFxuXHRcdFx0XCI+XG5cdFx0XHQ8YnV0dG9uIG1hdC1zdHJva2VkLWJ1dHRvbiAqbmdJZj1cIiFpc1NlbGVjdGVkXCIgc3R5bGU9XCJmb250LXdlaWdodDogYm9sZGVyXCIgKGNsaWNrKT1cInRvZ2dsZUFsZXJ0UHJldmlldyhhbGVydClcIj5cblx0XHRcdFx0PG1hdC1pY29uPnZpc2liaWxpdHk8L21hdC1pY29uPlxuXHRcdFx0XHRQcmV2aWV3XG5cdFx0XHQ8L2J1dHRvbj5cblx0XHRcdDxidXR0b24gbWF0LXJhaXNlZC1idXR0b24gKm5nSWY9XCJpc1NlbGVjdGVkXCIgY29sb3I9XCJwcmltYXJ5XCIgKGNsaWNrKT1cInRvZ2dsZUFsZXJ0UHJldmlldyhhbGVydClcIj5cblx0XHRcdFx0PG1hdC1pY29uPnZpc2liaWxpdHlfb2ZmPC9tYXQtaWNvbj5cblx0XHRcdFx0U3RvcCBwcmV2aWV3XG5cdFx0XHQ8L2J1dHRvbj5cblx0XHQ8L25nLWNvbnRhaW5lcj5cblxuXHRcdDxhIG1hdC1zdHJva2VkLWJ1dHRvbiB0YXJnZXQ9XCJfYmxhbmtcIiAqbmdJZj1cImFsZXJ0LmhlbHBMaW5rXCIgW2hyZWZdPVwiYWxlcnQuaGVscExpbmtcIj5MZWFybiBtb3JlPC9hPlxuXHQ8L2Rpdj5cbjwvZGl2PlxuIl19